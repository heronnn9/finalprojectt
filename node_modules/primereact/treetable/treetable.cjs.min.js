"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("primereact/api"),n=require("primereact/utils"),r=require("primereact/hooks"),l=require("primereact/paginator"),o=require("primereact/ripple"),a=require("primereact/overlayservice"),i=require("primereact/icons/chevrondown"),c=require("primereact/icons/chevronright"),u=require("primereact/icons/check"),s=require("primereact/icons/minus"),f=require("primereact/inputtext"),d=require("primereact/tooltip"),p=require("primereact/icons/sortalt"),m=require("primereact/icons/sortamountdown"),y=require("primereact/icons/sortamountupalt"),g=require("primereact/icons/spinner"),b=require("primereact/icons/arrowdown"),h=require("primereact/icons/arrowup");function v(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function S(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var C=S(e),E=v(t);function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w.apply(this,arguments)}function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function O(e,t){if("object"!==x(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function k(e){var t=O(e,"string");return"symbol"===x(t)?t:String(t)}function P(e,t,n){return(t=k(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(e){if(Array.isArray(e))return M(e)}function N(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function I(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}function j(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function U(e){return D(e)||N(e)||I(e)||j()}function K(e){if(Array.isArray(e))return e}function R(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,o,a,i=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,l=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw l}}return i}}function T(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function F(e,t){return K(e)||R(e,t)||I(e,t)||T()}var H={defaultProps:{__TYPE:"Column",align:null,alignFrozen:"left",alignHeader:null,body:null,bodyClassName:null,bodyStyle:null,cellEditValidator:null,cellEditValidatorEvent:"click",className:null,colSpan:null,columnKey:null,dataType:"text",editor:null,excludeGlobalFilter:!1,expander:!1,exportField:null,exportable:!0,field:null,filter:!1,filterApply:null,filterClear:null,filterElement:null,filterField:null,filterFooter:null,filterFunction:null,filterHeader:null,filterHeaderClassName:null,filterHeaderStyle:null,filterMatchMode:null,filterMatchModeOptions:null,filterMaxLength:null,filterMenuClassName:null,filterMenuStyle:null,filterPlaceholder:null,filterType:"text",footer:null,footerClassName:null,footerStyle:null,frozen:!1,header:null,headerClassName:null,headerStyle:null,headerTooltip:null,headerTooltipOptions:null,hidden:!1,maxConstraints:2,onBeforeCellEditHide:null,onBeforeCellEditShow:null,onCellEditCancel:null,onCellEditComplete:null,onCellEditInit:null,onFilterApplyClick:null,onFilterClear:null,onFilterConstraintAdd:null,onFilterConstraintRemove:null,onFilterMatchModeChange:null,onFilterOperatorChange:null,reorderable:!0,resizeable:!0,rowEditor:!1,rowReorder:!1,rowReorderIcon:null,rowSpan:null,selectionMode:null,showAddButton:!0,showApplyButton:!0,showClearButton:!0,showFilterMatchModes:!0,showFilterMenu:!0,showFilterMenuOptions:!0,showFilterOperator:!0,sortField:null,sortFunction:null,sortable:!1,sortableDisabled:!1,style:null,children:void 0},getCProp:function(e,t){return n.ObjectUtils.getComponentProp(e,t,H.defaultProps)},getCProps:function(e){return n.ObjectUtils.getComponentProps(e,H.defaultProps)},getCOtherProps:function(e){return n.ObjectUtils.getComponentDiffProps(e,H.defaultProps)}},z={defaultProps:{__TYPE:"TreeTable",alwaysShowPaginator:!0,checkboxIcon:null,className:null,columnResizeMode:"fit",contextMenuSelectionKey:null,currentPageReportTemplate:"({currentPage} of {totalPages})",defaultSortOrder:1,emptyMessage:null,expandedKeys:null,filterDelay:300,filterLocale:void 0,filterMode:"lenient",filters:null,first:null,footer:null,footerColumnGroup:null,frozenFooterColumnGroup:null,frozenHeaderColumnGroup:null,frozenWidth:null,globalFilter:null,globalFilterMatchMode:t.FilterMatchMode.CONTAINS,header:null,headerColumnGroup:null,id:null,lazy:!1,loading:!1,loadingIcon:null,metaKeySelection:!0,multiSortMeta:null,onColReorder:null,onCollapse:null,onColumnResizeEnd:null,onContextMenu:null,onContextMenuSelectionChange:null,onExpand:null,onFilter:null,onPage:null,onRowClick:null,onSelect:null,onSelectionChange:null,onSort:null,onToggle:null,onUnselect:null,pageLinkSize:5,paginator:!1,paginatorClassName:null,paginatorDropdownAppendTo:null,paginatorLeft:null,paginatorPosition:"bottom",paginatorRight:null,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",propagateSelectionDown:!0,propagateSelectionUp:!0,removableSort:!1,reorderableColumns:!1,reorderIndicatorDownIcon:null,reorderIndicatorUpIcon:null,resizableColumns:!1,rowClassName:null,rowHover:!1,rows:null,rowsPerPageOptions:null,scrollHeight:null,scrollable:!1,selectOnEdit:!0,selectionKeys:null,selectionMode:null,showGridlines:!1,sortField:null,sortMode:"single",sortIcon:null,sortOrder:null,stripedRows:!1,style:null,tabIndex:0,tableClassName:null,tableStyle:null,totalRecords:null,value:null,children:void 0},getProps:function(e){return n.ObjectUtils.getMergedProps(e,z.defaultProps)},getOtherProps:function(e){return n.ObjectUtils.getDiffProps(e,z.defaultProps)}},A=function(e){var t=F(C.useState(!1),2),l=t[0],o=t[1],i=C.useRef(null),c=C.useRef(null),u=C.useRef(!1),s=C.useRef(null),f=C.useRef(null),d=F(r.useEventListener({type:"click",listener:function(e){!u.current&&g(e.target)&&h(e),u.current=!1}}),2),p=d[0],m=d[1],y=function(){e.editor&&!l&&(e.selectOnEdit||!e.selectOnEdit&&e.selected)&&(u.current=!0,o(!0),p(),s.current=function(e){g(e.target)||(u.current=!0)},a.OverlayService.on("overlay-click",s.current))},g=function(e){return i.current&&!(i.current.isSameNode(e)||i.current.contains(e))},b=function(){setTimeout((function(){o(!1),m(),a.OverlayService.off("overlay-click",s.current),s.current=null}),1)},h=function(t){e.cellEditValidator?e.cellEditValidator({originalEvent:t,columnProps:e})&&b():b()};C.useEffect((function(){if(i.current&&e.editor)if(clearTimeout(f.current),l){var t=n.DomHandler.findSingle(i.current,"input");t&&document.activeElement!==t&&!t.hasAttribute("data-isCellEditing")&&(t.setAttribute("data-isCellEditing",!0),t.focus()),c.current.tabIndex=-1}else f.current=setTimeout((function(){c.current&&c.current.setAttribute("tabindex",0)}),50)})),r.useUnmountEffect((function(){s.current&&(a.OverlayService.off("overlay-click",s.current),s.current=null)}));var v,S=n.ObjectUtils.getPropValue(e.bodyClassName,e.node.data,{field:e.field,rowIndex:e.rowIndex,props:e}),E=n.classNames(S||e.className,{"p-editable-column":e.editor,"p-cell-editing":!!e.editor&&l}),w=e.bodyStyle||e.style;if(l){if(!e.editor)throw new Error("Editor is not found on column.");v=n.ObjectUtils.getJSXElement(e.editor,{node:e.node,rowData:e.node.data,value:n.ObjectUtils.resolveFieldData(e.node.data,e.field),field:e.field,rowIndex:e.rowIndex,props:e})}else v=e.body?n.ObjectUtils.getJSXElement(e.body,e.node,{field:e.field,rowIndex:e.rowIndex,props:e}):n.ObjectUtils.resolveFieldData(e.node.data,e.field);var x=e.editor&&C.createElement("a",{tabIndex:0,ref:c,className:"p-cell-editor-key-helper p-hidden-accessible",onFocus:function(e){y()}},C.createElement("span",null));return C.createElement("td",{ref:i,className:E,style:w,onClick:y,onKeyDown:function(e){13!==e.which&&9!==e.which||h(e)}},e.children,x,v)};function L(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=q(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}function q(e,t){if(e){if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}A.displayName="TreeTableBodyCell";var V=C.memo((function(e){var r=C.useRef(null),l=C.useRef(null),a=C.useRef(null),f=C.useRef(!1),d=!!e.expandedKeys&&void 0!==e.expandedKeys[e.node.key],p=function(e,t){return H.getCProp(e,t)},m=function(e){d?g(e):y(e),e.preventDefault(),e.stopPropagation()},y=function(t){var n=e.expandedKeys?_({},e.expandedKeys):{};n[e.node.key]=!0,e.onToggle({originalEvent:t,value:n}),b(t,!0)},g=function(t){var n=_({},e.expandedKeys);delete n[e.node.key],e.onToggle({originalEvent:t,value:n}),b(t,!1)},b=function(t,n){n?e.onExpand&&e.onExpand({originalEvent:t,node:e.node}):e.onCollapse&&e.onCollapse({originalEvent:t,node:e.node})},h=function(t){e.onRowClick&&e.onRowClick(t,e.node),f.current=!1},v=function(t){var r=P(),l=e.selectionKeys?_({},e.selectionKeys):{};r?(e.propagateSelectionDown?O(e.node,!1,l):delete l[e.node.key],e.propagateSelectionUp&&e.onPropagateUp&&e.onPropagateUp({originalEvent:t,check:!1,selectionKeys:l}),e.onUnselect&&e.onUnselect({originalEvent:t,node:e.node})):(e.propagateSelectionDown?O(e.node,!0,l):l[e.node.key]={checked:!0},e.propagateSelectionUp&&e.onPropagateUp&&e.onPropagateUp({originalEvent:t,check:!0,selectionKeys:l}),e.onSelect&&e.onSelect({originalEvent:t,node:e.node})),e.onSelectionChange&&e.onSelectionChange({originalEvent:t,value:l}),n.DomHandler.clearSelection()},S=function(){n.DomHandler.addClass(a.current,"p-focus"),n.DomHandler.addClass(l.current,"p-checkbox-focused")},E=function(){n.DomHandler.removeClass(a.current,"p-focus"),n.DomHandler.removeClass(l.current,"p-checkbox-focused")},x=function(t){var n,r=t.check,l=t.selectionKeys,o=0,a=!1,i=L(e.node.children);try{for(i.s();!(n=i.n()).done;){var c=n.value;l[c.key]&&l[c.key].checked?o++:l[c.key]&&l[c.key].partialChecked&&(a=!0)}}catch(e){i.e(e)}finally{i.f()}r&&o===e.node.children.length?l[e.node.key]={checked:!0,partialChecked:!1}:(r||delete l[e.node.key],l[e.node.key]=a||o>0&&o!==e.node.children.length?{checked:!1,partialChecked:!0}:{checked:!1,partialChecked:!1}),e.propagateSelectionUp&&e.onPropagateUp&&e.onPropagateUp(t)},O=function e(t,n,r){if(n?r[t.key]={checked:!0,partialChecked:!1}:delete r[t.key],t.children&&t.children.length)for(var l=0;l<t.children.length;l++)e(t.children[l],n,r)},k=function(){return!("single"!==e.selectionMode&&"multiple"!==e.selectionMode||!e.selectionKeys)&&("single"===e.selectionMode?e.selectionKeys===e.node.key:void 0!==e.selectionKeys[e.node.key])},P=function(){return!!e.selectionKeys&&(e.selectionKeys[e.node.key]&&e.selectionKeys[e.node.key].checked)},M=function(){if("checkbox"===e.selectionMode&&!1!==e.node.selectable){var t=P(),r=!!e.selectionKeys&&e.selectionKeys[e.node.key]&&e.selectionKeys[e.node.key].partialChecked,o=n.classNames("p-checkbox-box",{"p-highlight":t,"p-indeterminate":r}),i="p-checkbox-icon p-c",c=n.IconUtils.getJSXIcon(t?e.checkboxIcon||C.createElement(u.CheckIcon,{className:i}):r?e.checkboxIcon||C.createElement(s.MinusIcon,{className:i}):null,{className:i},{props:e,checked:t,partialChecked:r});return C.createElement("div",{className:"p-checkbox p-treetable-checkbox p-component",ref:l,onClick:v,role:"checkbox","aria-checked":t},C.createElement("div",{className:"p-hidden-accessible"},C.createElement("input",{type:"checkbox",onFocus:S,onBlur:E})),C.createElement("div",{className:o,ref:a},c))}return null},D=e.columns.map((function(r,l){var a,u,s,f,y;return p(r,"expander")&&(s=t.ariaLabel(d?"collapseLabel":"expandLabel"),f={className:"p-treetable-toggler-icon","aria-hidden":!0},y=n.IconUtils.getJSXIcon(e.togglerIcon||C.createElement(d?i.ChevronDownIcon:c.ChevronRightIcon,f),_({},f),{props:e}),a=C.createElement("button",{type:"button",className:"p-treetable-toggler p-link p-unselectable-text",onClick:m,tabIndex:-1,style:{marginLeft:16*e.level+"px",visibility:!1===e.node.leaf||e.node.children&&e.node.children.length?"visible":"hidden"},"aria-label":s},y,C.createElement(o.Ripple,null)),u=M()),C.createElement(A,w({key:"".concat(p(r,"columnKey")||p(r,"field"),"_").concat(l)},H.getCProps(r),{column:r,selectOnEdit:e.selectOnEdit,selected:k(),node:e.node,rowIndex:e.rowIndex}),a,u)})),N=d&&e.node.children?e.node.children.map((function(t,n){return C.createElement(V,{key:"".concat(t.key||JSON.stringify(t.data),"_").concat(n),level:e.level+1,rowIndex:e.rowIndex+"_"+n,node:t,checkboxIcon:e.checkboxIcon,columns:e.columns,expandedKeys:e.expandedKeys,selectOnEdit:e.selectOnEdit,onToggle:e.onToggle,onExpand:e.onExpand,onCollapse:e.onCollapse,selectionMode:e.selectionMode,selectionKeys:e.selectionKeys,onSelectionChange:e.onSelectionChange,metaKeySelection:e.metaKeySelection,onRowClick:e.onRowClick,onSelect:e.onSelect,onUnselect:e.onUnselect,propagateSelectionUp:e.propagateSelectionUp,propagateSelectionDown:e.propagateSelectionDown,onPropagateUp:x,rowClassName:e.rowClassName,contextMenuSelectionKey:e.contextMenuSelectionKey,onContextMenuSelectionChange:e.onContextMenuSelectionChange,onContextMenu:e.onContextMenu})})):null,I={"p-highlight":k(),"p-highlight-contextmenu":e.contextMenuSelectionKey&&e.contextMenuSelectionKey===e.node.key};if(e.rowClassName){var j=e.rowClassName(e.node);I=_(_({},I),j)}return I=n.classNames(I,e.node.className),C.createElement(C.Fragment,null,C.createElement("tr",{ref:r,tabIndex:0,className:I,style:e.node.style,onClick:h,onTouchEnd:function(){f.current=!0},onContextMenu:function(t){n.DomHandler.clearSelection(),e.onContextMenuSelectionChange&&e.onContextMenuSelectionChange({originalEvent:t,value:e.node.key}),e.onContextMenu&&e.onContextMenu({originalEvent:t,node:e.node})},onKeyDown:function(e){if(e.target===r.current){var t=e.currentTarget;switch(e.which){case 40:var n=t.nextElementSibling;n&&n.focus(),e.preventDefault();break;case 38:var l=t.previousElementSibling;l&&l.focus(),e.preventDefault();break;case 39:d||y(e),e.preventDefault();break;case 37:d&&g(e),e.preventDefault();break;case 13:h(e),e.preventDefault()}}}},D),N)}));function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Y(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}function Y(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}V.displayName="TreeTableRow";var Q=C.memo((function(e){var r="single"===e.selectionMode,l="multiple"===e.selectionMode,o=function t(n){var r,l=[],o=J(n=n||e.value);try{for(o.s();!(r=o.n()).done;){var i=r.value;l.push(i.key),a(i.key)&&(l=l.concat(t(i.children)))}}catch(e){o.e(e)}finally{o.f()}return l},a=function(t){return e.expandedKeys&&!!e.expandedKeys[t]},i=function(t,a){e.onRowClick&&e.onRowClick({originalEvent:t,node:a});var i=t.target.nodeName;if("INPUT"!==i&&"BUTTON"!==i&&"A"!==i&&!n.DomHandler.hasClass(t.target,"p-clickable")&&(r||l)&&!1!==a.selectable){var u,s=c(a),f=e.metaKeySelection,d=o(),p=d.findIndex((function(e){return e===a.key}));if(l&&t.shiftKey){n.DomHandler.clearSelection();var m=d.findIndex((function(t){return e.selectionKeys[t]})),y=Math.min(p,m),g=Math.max(p,m);u=B({},e.selectionKeys);for(var b=y;b<=g;b++){u[d[b]]=!0}}else if(f){var h=t.metaKey||t.ctrlKey;s&&h?(r?u=null:delete(u=B({},e.selectionKeys))[a.key],e.onUnselect&&e.onUnselect({originalEvent:t,node:a})):(r?u=a.key:l&&((u=h&&e.selectionKeys?B({},e.selectionKeys):{})[a.key]=!0),e.onSelect&&e.onSelect({originalEvent:t,node:a}))}else r?s?(u=null,e.onUnselect&&e.onUnselect({originalEvent:t,node:a})):(u=a.key,e.onSelect&&e.onSelect({originalEvent:t,node:a})):s?(delete(u=B({},e.selectionKeys))[a.key],e.onUnselect&&e.onUnselect({originalEvent:t,node:a})):((u=e.selectionKeys?B({},e.selectionKeys):{})[a.key]=!0,e.onSelect&&e.onSelect({originalEvent:t,node:a}));e.onSelectionChange&&e.onSelectionChange({originalEvent:t,value:u})}},c=function(t){return!(!r&&!l||!e.selectionKeys)&&(r?e.selectionKeys===t.key:void 0!==e.selectionKeys[t.key])},u=function(t,n){return C.createElement(V,{key:"".concat(t.key||JSON.stringify(t.data),"_").concat(n),level:0,rowIndex:n,selectOnEdit:e.selectOnEdit,node:t,checkboxIcon:e.checkboxIcon,columns:e.columns,expandedKeys:e.expandedKeys,onToggle:e.onToggle,onExpand:e.onExpand,onCollapse:e.onCollapse,selectionMode:e.selectionMode,selectionKeys:e.selectionKeys,onSelectionChange:e.onSelectionChange,metaKeySelection:e.metaKeySelection,onRowClick:i,onSelect:e.onSelect,onUnselect:e.onUnselect,propagateSelectionUp:e.propagateSelectionUp,propagateSelectionDown:e.propagateSelectionDown,rowClassName:e.rowClassName,contextMenuSelectionKey:e.contextMenuSelectionKey,onContextMenuSelectionChange:e.onContextMenuSelectionChange,onContextMenu:e.onContextMenu})},s=e.value&&e.value.length?function(){if(e.paginator&&!e.lazy){for(var t=e.first||0,n=t+(e.rows||0),r=[],l=t;l<n;l++){if(!e.value[l])break;r.push(u(e.value[l]))}return r}return e.value.map(u)}():function(){if(e.loading)return null;var n=e.columns?e.columns.length:null,r=e.emptyMessage||t.localeOption("emptyMessage");return C.createElement("tr",null,C.createElement("td",{className:"p-treetable-emptymessage",colSpan:n},r))}();return C.createElement("tbody",{className:"p-treetable-tbody"},s)}));Q.displayName="TreeTableBody";var Z={defaultProps:{__TYPE:"ColumnGroup",children:void 0},getCProp:function(e,t){return n.ObjectUtils.getComponentProp(e,t,Z.defaultProps)},getCProps:function(e){return n.ObjectUtils.getComponentProps(e,Z.defaultProps)}},ee={defaultProps:{__TYPE:"Row",style:null,className:null,children:void 0},getProps:function(e){return n.ObjectUtils.getMergedProps(e,ee.defaultProps)},getOtherProps:function(e){return n.ObjectUtils.getDiffProps(e,ee.defaultProps)},getCProp:function(e,t){return n.ObjectUtils.getComponentProp(e,t,ee.defaultProps)}},te=C.memo((function(e){var t=function(e,t){return H.getCProp(e,t)},n=function(e,n){return C.createElement("td",{key:e.field||n,className:t(e,"footerClassName")||t(e,"className"),style:t(e,"footerStyle")||t(e,"style"),rowSpan:t(e,"rowSpan"),colSpan:t(e,"colSpan")},t(e,"footer"))},r=function(e,t){var r=C.Children.toArray(ee.getCProp(e,"children")).map(n);return C.createElement("tr",{key:t},r)},l=e.columnGroup?C.Children.toArray(Z.getCProp(e.columnGroup,"children")).map(r):function(e){if(e){var t=e.map(n);return C.createElement("tr",null,t)}return null}(e.columns);return function(){if(e.columnGroup)return!0;for(var n=0;n<e.columns.length;n++)if(t(e.columns[n],"footer"))return!0;return!1}()?C.createElement("tfoot",{className:"p-treetable-tfoot"},l):null}));function ne(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=re(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}function re(e,t){if(e){if("string"==typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(e,t):void 0}}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}te.displayName="TreeTableFooter";var oe=C.memo((function(e){var t,r=C.useRef(null),l=function(t,r){if(E(r,"sortable")){var l=t.target;(n.DomHandler.hasClass(l,"p-sortable-column")||n.DomHandler.hasClass(l,"p-column-title")||n.DomHandler.hasClass(l,"p-sortable-column-icon")||n.DomHandler.hasClass(l.parentElement,"p-sortable-column-icon"))&&(e.onSort({originalEvent:t,sortField:E(r,"sortField")||E(r,"field"),sortFunction:E(r,"sortFunction"),sortable:E(r,"sortable")}),n.DomHandler.clearSelection())}},o=function(t,n){e.reorderableColumns&&E(n,"reorderable")&&("INPUT"!==t.target.nodeName?t.currentTarget.draggable=!0:"INPUT"===t.target.nodeName&&(t.currentTarget.draggable=!1))},a=function(e,t){"Enter"===e.key&&(l(e,t),e.preventDefault())},i=function(t){if(e.multiSortMeta)for(var n=0;n<e.multiSortMeta.length;n++)if(e.multiSortMeta[n].field===E(t,"field"))return n;return-1},c=function(t,n){e.resizableColumns&&e.onResizeStart&&e.onResizeStart({originalEvent:t,columnEl:t.target.parentElement,column:n})},u=function(t,n){e.onDragStart&&e.onDragStart({originalEvent:t,column:n})},s=function(t,n){e.onDragOver&&e.onDragOver({originalEvent:t,column:n})},g=function(t,n){e.onDragLeave&&e.onDragLeave({originalEvent:t,column:n})},b=function(t,n){e.onDrop&&e.onDrop({originalEvent:t,column:n})},h=function(t,n){if(E(n,"filter")&&e.onFilter){r.current&&clearTimeout(r.current);var l=t.target.value;r.current=setTimeout((function(){e.onFilter({value:l,field:E(n,"field"),matchMode:E(n,"filterMatchMode")||"startsWith"}),r.current=null}),e.filterDelay)}},v=function(e){if(e){var t,n=ne(e);try{for(n.s();!(t=n.n()).done;){if(E(t.value,"filter"))return!0}}catch(e){n.e(e)}finally{n.f()}}return!1},S=function(e,t,n){return E(e,"sortable")?t&&n<0?"descending":t&&n>0?"ascending":"none":null},E=function(e){return e?"string"==typeof(arguments.length<=1?void 0:arguments[1])?H.getCProp(e,arguments.length<=1?void 0:arguments[1]):H.getCProp((arguments.length<=1?void 0:arguments[1])||e,arguments.length<=2?void 0:arguments[2]):null},x=function(t,r,l){if(E(t,"sortable")){var o="p-sortable-column-icon";return n.IconUtils.getJSXIcon(e.sortIcon||C.createElement(r?l<0?m.SortAmountDownIcon:y.SortAmountUpAltIcon:p.SortAltIcon,{className:o}),{className:o},{props:e,sorted:r,sortOrder:l})}return null},O=function(t){return e.resizableColumns?C.createElement("span",{className:"p-column-resizer p-clickable",onMouseDown:function(e){return c(e,t)}}):null},k=function(t){return-1!==t&&e.multiSortMeta&&e.multiSortMeta.length>1?C.createElement("span",{className:"p-sortable-column-badge"},t+1):null},P=function(t,r){var c;if(E(t,"filter")&&r.renderFilter&&(c=E(t,"filterElement")||C.createElement(f.InputText,{onInput:function(e){return h(e,t)},type:e.filterType,defaultValue:e.filters&&e.filters[E(t,"field")]?e.filters[E(t,"field")].value:null,className:"p-column-filter",placeholder:E(t,"filterPlaceholder"),maxLength:E(t,"filterMaxLength")})),r.filterOnly)return C.createElement("th",{key:E(t,"columnKey")||E(t,"field")||r.index,className:n.classNames("p-filter-column",E(t,"filterHeaderClassName")),style:E(t,"filterHeaderStyle")||E(t,"style"),rowSpan:E(t,"rowSpan"),colSpan:E(t,"colSpan")},c);var p=C.createRef(null),m=i(t),y=-1!==m?e.multiSortMeta[m]:null,v=E(t,"field")===e.sortField,P=null!==y,M=E(t,"sortable")&&(v||P),D=0;v?D=e.sortOrder:P&&(D=y.order);var N=x(t,M,D),I=S(t,M,D),j=k(m),U=n.classNames(E(t,"headerClassName")||E(t,"className"),{"p-sortable-column":E(t,"sortable"),"p-highlight":M,"p-resizable-column":e.resizableColumns&&E(t,"resizeable")}),K=E(t,"headerTooltip"),R=n.ObjectUtils.isNotEmpty(K),T=O(t);return C.createElement(C.Fragment,{key:t.columnKey||t.field||r.index},C.createElement("th",{ref:p,className:U,style:E(t,"headerStyle")||E(t,"style"),tabIndex:E(t,"sortable")?e.tabIndex:null,onClick:function(e){return l(e,t)},onMouseDown:function(e){return o(e,t)},onKeyDown:function(e){return a(e,t)},rowSpan:E(t,"rowSpan"),colSpan:E(t,"colSpan"),"aria-sort":I,onDragStart:function(e){return u(e,t)},onDragOver:function(e){return s(e,t)},onDragLeave:function(e){return g(e,t)},onDrop:function(e){return b(e,t)}},T,C.createElement("span",{className:"p-column-title"},E(t,"header")),N,j,c),R&&C.createElement(d.Tooltip,w({target:p,content:K},E(t,"headerTooltipOptions"))))},M=function(e,t){var n=C.Children.toArray(ee.getCProp(e,"children")).map((function(e,t){return P(e,{index:t,filterOnly:!1,renderFilter:!0})}));return C.createElement("tr",{key:t},n)},D=e.columnGroup?C.Children.toArray(Z.getCProp(e.columnGroup,"children")).map(M):(t=e.columns)?v(t)?C.createElement(C.Fragment,null,C.createElement("tr",null,t.map((function(e,t){return P(e,{index:t,filterOnly:!1,renderFilter:!1})}))),C.createElement("tr",null,t.map((function(e,t){return P(e,{index:t,filterOnly:!0,renderFilter:!0})})))):C.createElement("tr",null,t.map((function(e,t){return P(e,{index:t,filterOnly:!1,renderFilter:!1})}))):null;return C.createElement("thead",{className:"p-treetable-thead"},D)}));oe.displayName="TreeTableHeader";var ae=C.memo((function(e){var t=C.useRef(null),l=C.useRef(null),o=C.useRef(null),a=C.useRef(null),i=C.useRef(null),c=C.useRef(null),u=C.useRef(null),s=function(){if(e.scrollHeight)if(-1!==e.scrollHeight.indexOf("%")){var r=f(t.current);a.current.style.visibility="hidden",a.current.style.height="100px";var l=n.DomHandler.getOuterHeight(r),o=n.DomHandler.getOuterHeight(r.parentElement)*parseInt(e.scrollHeight,10)/100-(l-100);a.current.style.height="auto",a.current.style.maxHeight=o+"px",a.current.style.visibility="visible"}else a.current.style.maxHeight=e.scrollHeight},f=function(e){if(e){for(var t=e;t&&!n.DomHandler.hasClass(t,"p-treetable");)t=t.parentElement;return t}return null};r.useMountEffect((function(){if(e.frozen)a.current.style.paddingBottom=n.DomHandler.calculateScrollbarWidth()+"px";else{var t=n.DomHandler.calculateScrollbarWidth();o.current.style.marginRight=t+"px",u.current&&(u.current.style.marginRight=t+"px")}})),C.useEffect((function(){s()}));var d=n.classNames("p-treetable-scrollable-view",{"p-treetable-frozen-view":e.frozen,"p-treetable-unfrozen-view":!e.frozen&&e.frozenWidth}),p=e.frozen?e.frozenWidth:"calc(100% - "+e.frozenWidth+")",m=e.frozen?null:e.frozenWidth,y=function(){if(n.ObjectUtils.isNotEmpty(e.columns)){var t=e.columns.map((function(e,t){return C.createElement("col",{key:e.field+"_"+t})}));return C.createElement("colgroup",{className:"p-treetable-scrollable-colgroup"},t)}return null}(),g=!e.frozen&&e.scrollHeight?{overflowY:"scroll"}:null;return C.createElement("div",{className:d,style:{width:p,left:m},ref:t},C.createElement("div",{className:"p-treetable-scrollable-header",ref:l,onScroll:function(){l.current.scrollLeft=0}},C.createElement("div",{className:"p-treetable-scrollable-header-box",ref:o},C.createElement("table",{className:"p-treetable-scrollable-header-table"},y,e.header))),C.createElement("div",{className:"p-treetable-scrollable-body",ref:a,style:g,onScroll:function(){var e,r=t.current.previousElementSibling;r&&(e=n.DomHandler.findSingle(r,".p-treetable-scrollable-body")),o.current.style.marginLeft=-1*a.current.scrollLeft+"px",u.current&&(u.current.style.marginLeft=-1*a.current.scrollLeft+"px"),e&&(e.scrollTop=a.current.scrollTop)}},C.createElement("table",{ref:i,style:{top:"0"},className:"p-treetable-scrollable-body-table"},y,e.body)),C.createElement("div",{className:"p-treetable-scrollable-footer",ref:c},C.createElement("div",{className:"p-treetable-scrollable-footer-box",ref:u},C.createElement("table",{className:"p-treetable-scrollable-footer-table"},y,e.footer))))}));function ie(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ce(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}function ce(e,t){if(e){if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ue(e,t):void 0}}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}ae.displayName="TreeTableScrollableView";var de=C.forwardRef((function(e,o){var a=z.getProps(e),i=F(C.useState(a.expandedKeys),2),c=i[0],u=i[1],s=F(C.useState(a.first),2),f=s[0],d=s[1],p=F(C.useState(a.rows),2),m=p[0],y=p[1],v=F(C.useState(a.sortField),2),S=v[0],x=v[1],O=F(C.useState(a.sortOrder),2),k=O[0],P=O[1],M=F(C.useState(a.multiSortMeta),2),D=M[0],N=M[1],I=F(C.useState(a.filters),2),j=I[0],K=I[1],R=F(C.useState([]),2),T=R[0],A=R[1],L=C.useRef(null),q=C.useRef(null),G=C.useRef(null),W=C.useRef(null),_=C.useRef(null),V=C.useRef(null),X=C.useRef(null),B=C.useRef(null),J=C.useRef(0),Y=C.useRef(0),$=C.useRef(0),Z=C.useRef(null),ee=C.useRef(null),ne=C.useRef(null),re=C.useRef(null),le=C.useRef(null),ce=C.useRef(null),ue=F(r.useEventListener({type:"mousemove",listener:function(e){V.current&&Ue(e)}}),2),se=ue[0],pe=ue[1],me=F(r.useEventListener({type:"mouseup",listener:function(e){V.current&&(V.current=!1,Ke())}}),2),ye=me[0],ge=me[1],be=function(e){a.onToggle?a.onToggle(e):u(e.value)},he=function(e){a.onPage?a.onPage(e):(d(e.first),y(e.rows))},ve=function(e){var t,n,r=e.sortField,l=a.defaultSortOrder;if(re.current=e.sortable,le.current=e.sortFunction,ce.current=e.sortField,"multiple"===a.sortMode){var o=e.originalEvent.metaKey||e.originalEvent.ctrlKey;if((t=U(Je()))&&t instanceof Array){var i=t.find((function(e){return e.field===r}));l=i?Se(i.order):l}var c={field:r,order:l};l?(t&&o||(t=[]),Ce(c,t)):a.removableSort&&t&&Ee(c,t),n={multiSortMeta:t}}else l=Xe()===r?Se(Be()):l,a.removableSort&&(r=l?r:null),n={sortField:r,sortOrder:l};a.onSort?a.onSort(n):(d(0),x(n.sortField),P(n.sortOrder),N(n.multiSortMeta))},Se=function(e){return a.removableSort?a.defaultSortOrder===e?-1*e:0:-1*e},Ce=function(e,t){for(var n=-1,r=0;r<t.length;r++)if(t[r].field===e.field){n=r;break}n>=0?t[n]=e:t.push(e)},Ee=function(e,t){for(var n=-1,r=0;r<t.length;r++)if(t[r].field===e.field){n=r;break}n>=0&&t.splice(n,1),t=t.length>0?t:null},we=function(e){return xe(e)},xe=function e(t){var r=U(t);if(re.current&&"custom"===re.current&&le.current)r=le.current({data:t,field:Xe(),order:Be()});else{r.sort((function(e,t){var r=Xe(),l=n.ObjectUtils.resolveFieldData(e.data,r),o=n.ObjectUtils.resolveFieldData(t.data,r);return Me(l,o,Be())}));for(var l=0;l<r.length;l++)r[l].children&&r[l].children.length&&(r[l].children=e(r[l].children))}return r},Oe=function(e){var t=Je();return t?ke(e,t):e},ke=function e(t,n){var r=U(t);r.sort((function(e,t){return Pe(e,t,n,0)}));for(var l=0;l<r.length;l++)r[l].children&&r[l].children.length&&(r[l].children=e(r[l].children,n));return r},Pe=function e(t,r,l,o){var a=n.ObjectUtils.resolveFieldData(t.data,l[o].field),i=n.ObjectUtils.resolveFieldData(r.data,l[o].field);return 0===n.ObjectUtils.compare(a,i,E.default.locale)?l.length-1>o?e(t,r,l,o+1):0:Me(a,i,l[o].order)},Me=function(e,t,r){return n.ObjectUtils.sort(e,t,r,E.default.locale,E.default.nullSortOrder)},De=function(e,t,n){Ne({value:e,field:t,matchMode:n})},Ne=function(e){var t=Ye(),n=t?fe({},t):{};Ie(e.value)?n[e.field]&&delete n[e.field]:n[e.field]={value:e.value,matchMode:e.matchMode},a.onFilter?a.onFilter({filters:n}):(d(0),K(n))},Ie=function(e){return null==e||("string"==typeof e&&0===e.trim().length||e instanceof Array&&0===e.length)},je=function(e){var t=n.DomHandler.getOffset(L.current).left;X.current=e.columnEl,B.current=e.column,V.current=!0,J.current=e.originalEvent.pageX-t+L.current.scrollLeft,Fe()},Ue=function(e){var t=n.DomHandler.getOffset(L.current).left;n.DomHandler.addClass(L.current,"p-unselectable-text"),G.current.style.height=L.current.offsetHeight+"px",G.current.style.top="0px",G.current.style.left=e.pageX-t+L.current.scrollLeft+"px",G.current.style.display="block"},Ke=function(e){var t=G.current.offsetLeft-J.current,r=X.current.offsetWidth,l=r+t;if(r+t>parseInt(X.current.style.minWidth||15,10)){if("fit"===a.columnResizeMode){var o=X.current.nextElementSibling,i=o.offsetWidth-t;if(l>15&&i>15)if(a.scrollable){var c=Re(X.current),u=n.DomHandler.findSingle(c,"table.p-treetable-scrollable-body-table"),s=n.DomHandler.findSingle(c,"table.p-treetable-scrollable-header-table"),f=n.DomHandler.findSingle(c,"table.p-treetable-scrollable-footer-table"),d=n.DomHandler.index(X.current);Te(s,d,l,i),Te(u,d,l,i),Te(f,d,l,i)}else X.current.style.width=l+"px",o&&(o.style.width=i+"px")}else if("expand"===a.columnResizeMode)if(a.scrollable){var p=Re(X.current),m=n.DomHandler.findSingle(p,"table.p-treetable-scrollable-body-table"),y=n.DomHandler.findSingle(p,"table.p-treetable-scrollable-header-table"),g=n.DomHandler.findSingle(p,"table.p-treetable-scrollable-footer-table");m.style.width=m.offsetWidth+t+"px",y.style.width=y.offsetWidth+t+"px",g&&(g.style.width=y.offsetWidth+t+"px");var b=n.DomHandler.index(X.current);Te(y,b,l,null),Te(m,b,l,null),Te(g,b,l,null)}else q.current.style.width=q.current.offsetWidth+t+"px",X.current.style.width=l+"px";a.onColumnResizeEnd&&a.onColumnResizeEnd({element:X.current,column:B.current,delta:t})}G.current.style.display="none",X.current=null,B.current=null,n.DomHandler.removeClass(L.current,"p-unselectable-text"),He()},Re=function(e){if(e){for(var t=e.parentElement;t&&!n.DomHandler.hasClass(t,"p-treetable-scrollable-view");)t=t.parentElement;return t}return null},Te=function(e,t,n,r){if(e){var l="COLGROUP"===e.children[0].nodeName?e.children[0]:null;if(!l)throw new Error("Scrollable tables require a colgroup to support resizable columns");var o=l.children[t],a=o.nextElementSibling;o.style.width=n+"px",a&&r&&(a.style.width=r+"px")}},Fe=function(){se(),ye()},He=function(){pe(),ge()},ze=function(e){var t=e.originalEvent,r=e.column;V.current?t.preventDefault():(Y.current=n.DomHandler.getHiddenElementOuterWidth(W.current),$.current=n.DomHandler.getHiddenElementOuterHeight(W.current),Z.current=Ge(t.currentTarget),ee.current=r,t.dataTransfer.setData("text","b"))},Ae=function(e){var t=e.originalEvent,r=Ge(t.currentTarget);if(a.reorderableColumns&&Z.current&&r){t.preventDefault();var l=n.DomHandler.getOffset(L.current),o=n.DomHandler.getOffset(r);if(Z.current!==r){var i=o.left-l.left,c=o.left+r.offsetWidth/2;W.current.style.top=o.top-l.top-($.current-1)+"px",_.current.style.top=o.top-l.top+r.offsetHeight+"px",t.pageX>c?(W.current.style.left=i+r.offsetWidth-Math.ceil(Y.current/2)+"px",_.current.style.left=i+r.offsetWidth-Math.ceil(Y.current/2)+"px",ne.current=1):(W.current.style.left=i-Math.ceil(Y.current/2)+"px",_.current.style.left=i-Math.ceil(Y.current/2)+"px",ne.current=-1),W.current.style.display="block",_.current.style.display="block"}}},Le=function(e){a.reorderableColumns&&Z.current&&(e.originalEvent.preventDefault(),W.current.style.display="none",_.current.style.display="none")},qe=function(e){var t=e.originalEvent,r=e.column;if(t.preventDefault(),Z.current){var l=n.DomHandler.index(Z.current),o=n.DomHandler.index(Ge(t.currentTarget)),i=l!==o;if(i&&(o-l==1&&-1===ne.current||l-o==1&&1===ne.current)&&(i=!1),i){var c=T?Qe():C.Children.toArray(a.children),u=function(e,t){return We(e,"columnKey")||We(t,"columnKey")?n.ObjectUtils.equals(e,t,"props.columnKey"):n.ObjectUtils.equals(e,t,"props.field")},s=c.findIndex((function(e){return u(e,ee.current)})),f=c.findIndex((function(e){return u(e,r)}));f<s&&1===ne.current&&f++,f>s&&-1===ne.current&&f--,n.ObjectUtils.reorderArray(c,s,f);var d,p=[],m=ie(c);try{for(m.s();!(d=m.n()).done;){var y=d.value;p.push(We(y,"columnKey")||We(y,"field"))}}catch(e){m.e(e)}finally{m.f()}A(p),a.onColReorder&&a.onColReorder({dragIndex:s,dropIndex:f,columns:c})}W.current.style.display="none",_.current.style.display="none",Z.current.draggable=!1,Z.current=null,ne.current=null}},Ge=function(e){if("TH"===e.nodeName)return e;for(var t=e.parentElement;"TH"!==t.nodeName&&(t=t.parentElement););return t},We=function(e,t){return H.getCProp(e,t)},_e=function(){return a.onPage?a.first:f},Ve=function(){return a.onPage?a.rows:m},Xe=function(){return a.onSort?a.sortField:S},Be=function(){return a.onSort?a.sortOrder:k},Je=function(){return(a.onSort?a.multiSortMeta:D)||[]},Ye=function(){return a.onFilter?a.filters:j},$e=function(e,t){if(e&&e.length)for(var n=0;n<e.length;n++){var r=e[n];if(We(r,"columnKey")===t||We(r,"field")===t)return r}return null},Qe=function(){var e=C.Children.toArray(a.children);if(e&&e.length){if(a.reorderableColumns&&T){var t,n=[],r=ie(T);try{for(r.s();!(t=r.n()).done;){var l=$e(e,t.value);l&&n.push(l)}}catch(e){r.e(e)}finally{r.f()}return[].concat(n,U(e.filter((function(e){return n.indexOf(e)<0}))))}return e}return null},Ze=function(e){var t,n=null,r=ie(e);try{for(r.s();!(t=r.n()).done;){var l=t.value;We(l,"frozen")&&(n=n||[]).push(l)}}catch(e){r.e(e)}finally{r.f()}return n},et=function(e){var t,n=null,r=ie(e);try{for(r.s();!(t=r.n()).done;){var l=t.value;We(l,"frozen")||(n=n||[]).push(l)}}catch(e){r.e(e)}finally{r.f()}return n},tt=function(e){var n,r=[],l=Ye(),o=C.Children.toArray(a.children),i="strict"===a.filterMode,c=ie(e);try{for(c.s();!(n=c.n()).done;){for(var u=n.value,s=fe({},u),f=!0,d=!1,p=0;p<o.length;p++){var m=o[p],y=l?l[We(m,"field")]:null,g=We(m,"field"),b=void 0;if(y){var h=y.matchMode||We(m,"filterMatchMode")||"startsWith";if(b={filterField:g,filterValue:y.value,filterConstraint:"custom"===h?We(m,"filterFunction"):t.FilterService.filters[h],isStrictMode:i,options:{rowData:u,filters:l,props:a,column:{filterMeta:y,filterField:g,props:H.getCProps(m)}}},(!i||nt(s,b)||rt(s,b))&&(i||rt(s,b)||nt(s,b))||(f=!1),!f)break}if(a.globalFilter&&!d){var v=fe({},s);b={filterField:g,filterValue:a.globalFilter,filterConstraint:t.FilterService.filters[a.globalFilterMatchMode],isStrictMode:i},(i&&(nt(v,b)||rt(v,b))||!i&&(rt(v,b)||nt(v,b)))&&(d=!0,s=v)}}var S=f;a.globalFilter&&(S=f&&d),S&&r.push(s)}}catch(e){c.e(e)}finally{c.f()}return r},nt=function(e,t){if(e){var n=!1;if(e.children){var r=U(e.children);e.children=[];var l,o=ie(r);try{for(o.s();!(l=o.n()).done;){var a=fe({},l.value);rt(a,t)&&(n=!0,e.children.push(a))}}catch(e){o.e(e)}finally{o.f()}}if(n)return!0}},rt=function(e,t){var r=t.filterField,l=t.filterValue,o=t.filterConstraint,i=t.isStrictMode,c=t.options,u=!1;return o(n.ObjectUtils.resolveFieldData(e.data,r),l,a.filterLocale,c)&&(u=!0),(!u||i&&!lt(e))&&(u=nt(e,{filterField:r,filterValue:l,filterConstraint:o,isStrictMode:i})||u),u},lt=function(e){return!1!==e.leaf&&!(e.children&&e.children.length)};C.useImperativeHandle(o,(function(){return{props:a,filter:De,getElement:function(){return L.current}}}));var ot,at=function(e,t){var n=Xe(),r=Be(),l=U(Je()),o=Ye();return C.createElement(oe,{columns:e,columnGroup:t,tabIndex:a.tabIndex,onSort:ve,sortField:n,sortIcon:a.sortIcon,sortOrder:r,multiSortMeta:l,resizableColumns:a.resizableColumns,onResizeStart:je,reorderableColumns:a.reorderableColumns,onDragStart:ze,onDragOver:Ae,onDragLeave:Le,onDrop:qe,onFilter:Ne,filters:o,filterDelay:a.filterDelay})},it=function(e,t){return C.createElement(te,{columns:e,columnGroup:t})},ct=function(e,t){return C.createElement(Q,{value:e,checkboxIcon:a.checkboxIcon,columns:t,expandedKeys:a.onToggle?a.expandedKeys:c,selectOnEdit:a.selectOnEdit,onToggle:be,onExpand:a.onExpand,onCollapse:a.onCollapse,paginator:a.paginator,first:_e(),rows:Ve(),selectionMode:a.selectionMode,selectionKeys:a.selectionKeys,onSelectionChange:a.onSelectionChange,metaKeySelection:a.metaKeySelection,onRowClick:a.onRowClick,onSelect:a.onSelect,onUnselect:a.onUnselect,propagateSelectionUp:a.propagateSelectionUp,propagateSelectionDown:a.propagateSelectionDown,lazy:a.lazy,rowClassName:a.rowClassName,emptyMessage:a.emptyMessage,loading:a.loading,contextMenuSelectionKey:a.contextMenuSelectionKey,onContextMenuSelectionChange:a.onContextMenuSelectionChange,onContextMenu:a.onContextMenu})},ut=function(e,t){var r=n.classNames("p-paginator-"+e,a.paginatorClassName);return C.createElement(l.Paginator,{first:_e(),rows:Ve(),pageLinkSize:a.pageLinkSize,className:r,onPageChange:he,template:a.paginatorTemplate,totalRecords:t,rowsPerPageOptions:a.rowsPerPageOptions,currentPageReportTemplate:a.currentPageReportTemplate,leftContent:a.paginatorLeft,rightContent:a.paginatorRight,alwaysShow:a.alwaysShowPaginator,dropdownAppendTo:a.paginatorDropdownAppendTo})},st=function(e,t,n,r,l){var o=at(t,r),i=it(t,l),c=ct(e,t);return C.createElement(ae,{columns:t,header:o,body:c,footer:i,scrollHeight:a.scrollHeight,frozen:n,frozenWidth:a.frozenWidth})},ft=function(e){var t,n,r=Qe(),l=Ze(r),o=l?et(r):r;return l&&(t=st(e,l,!0,a.frozenHeaderColumnGroup,a.frozenFooterColumnGroup)),n=st(e,o,!1,a.headerColumnGroup,a.footerColumnGroup),C.createElement("div",{className:"p-treetable-wrapper p-treetable-scrollable-wrapper"},t,n)},dt=function(e){var t=Qe(),r=at(t,a.headerColumnGroup),l=it(t,a.footerColumnGroup),o=ct(e,t),i=n.classNames("p-treetable-table",{"p-treetable-scrollable-table":a.scrollable,"p-treetable-resizable-table":a.resizableColumns,"p-treetable-resizable-table-fit":a.resizableColumns&&"fit"===a.columnResizeMode},a.tableClassName);return C.createElement("div",{className:"p-treetable-wrapper"},C.createElement("table",{ref:q,style:a.tableStyle,className:i},r,l,o))},pt=function(){var e=a.value||[];if(!a.lazy&&e&&e.length){var t=Ye(),r=Xe(),l=Je();(n.ObjectUtils.isNotEmpty(t)||a.globalFilter)&&(e=tt(e)),(r||n.ObjectUtils.isNotEmpty(l))&&("single"===a.sortMode?e=we(e):"multiple"===a.sortMode&&(e=Oe(e)))}return e}(),mt=n.ObjectUtils.findDiffKeys(a,de.defaultProps),yt=n.classNames("p-treetable p-component",{"p-treetable-hoverable-rows":a.rowHover,"p-treetable-selectable":a.selectionMode&&"single"===a.selectionMode||a.selectionMode&&"multiple"===a.selectionMode,"p-treetable-resizable":a.resizableColumns,"p-treetable-resizable-fit":a.resizableColumns&&"fit"===a.columnResizeMode,"p-treetable-striped":a.stripedRows,"p-treetable-gridlines":a.showGridlines},a.className),gt=(ot=pt,a.scrollable?ft(ot):dt(ot)),bt=function(e){return a.lazy?a.totalRecords:e?e.length:0}(pt),ht=a.header&&C.createElement("div",{className:"p-treetable-header"},a.header),vt=a.footer&&C.createElement("div",{className:"p-treetable-footer"},a.footer),St=a.paginator&&"bottom"!==a.paginatorPosition&&ut("top",bt),Ct=a.paginator&&"top"!==a.paginatorPosition&&ut("bottom",bt),Et=function(){if(a.loading){var e="p-treetable-loading-icon",t=n.IconUtils.getJSXIcon(a.loadingIcon||C.createElement(g.SpinnerIcon,{className:e,spin:!0}),{className:e},{props:a});return C.createElement("div",{className:"p-treetable-loading"},C.createElement("div",{className:"p-treetable-loading-overlay p-component-overlay"},t))}return null}(),wt=a.resizableColumns&&C.createElement("div",{ref:G,className:"p-column-resizer-helper",style:{display:"none"}}),xt={position:"absolute",display:"none"},Ot={className:"p-datatable-reorder-indicator-up",style:fe({},xt)},kt=a.reorderableColumns&&n.IconUtils.getJSXIcon(a.reorderIndicatorUpIcon||C.createElement(b.ArrowDownIcon,null),void 0,{props:a}),Pt=a.reorderableColumns&&C.createElement("span",w({ref:W},Ot),kt),Mt={className:"p-datatable-reorder-indicator-down",style:fe({},xt)},Dt=n.IconUtils.getJSXIcon(a.reorderIndicatorDownIcon||C.createElement(h.ArrowUpIcon,null),void 0,{props:a}),Nt=a.reorderableColumns&&C.createElement("span",w({ref:_},Mt),Dt);return C.createElement("div",w({ref:L,id:a.id,className:yt,style:a.style,"data-scrollselectors":".p-treetable-wrapper"},mt),Et,ht,St,gt,Ct,vt,wt,Pt,Nt)}));de.displayName="TreeTable",exports.TreeTable=de;
