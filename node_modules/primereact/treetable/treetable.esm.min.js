import*as e from"react";import t,{FilterMatchMode as n,ariaLabel as r,localeOption as l,FilterService as o}from"primereact/api";import{ObjectUtils as a,DomHandler as i,classNames as c,IconUtils as u}from"primereact/utils";import{useEventListener as s,useUnmountEffect as f,useMountEffect as d}from"primereact/hooks";import{Paginator as p}from"primereact/paginator";import{Ripple as m}from"primereact/ripple";import{OverlayService as y}from"primereact/overlayservice";import{ChevronDownIcon as g}from"primereact/icons/chevrondown";import{ChevronRightIcon as b}from"primereact/icons/chevronright";import{CheckIcon as h}from"primereact/icons/check";import{MinusIcon as v}from"primereact/icons/minus";import{InputText as S}from"primereact/inputtext";import{Tooltip as C}from"primereact/tooltip";import{SortAltIcon as E}from"primereact/icons/sortalt";import{SortAmountDownIcon as w}from"primereact/icons/sortamountdown";import{SortAmountUpAltIcon as x}from"primereact/icons/sortamountupalt";import{SpinnerIcon as k}from"primereact/icons/spinner";import{ArrowDownIcon as O}from"primereact/icons/arrowdown";import{ArrowUpIcon as P}from"primereact/icons/arrowup";function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M.apply(this,arguments)}function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function I(e,t){if("object"!==N(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function K(e){var t=I(e,"string");return"symbol"===N(t)?t:String(t)}function R(e,t,n){return(t=K(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e){if(Array.isArray(e))return D(e)}function F(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function z(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}function j(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function A(e){return T(e)||F(e)||z(e)||j()}function U(e){if(Array.isArray(e))return e}function H(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,o,a,i=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,l=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw l}}return i}}function L(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function G(e,t){return U(e)||H(e,t)||z(e,t)||L()}var W={defaultProps:{__TYPE:"Column",align:null,alignFrozen:"left",alignHeader:null,body:null,bodyClassName:null,bodyStyle:null,cellEditValidator:null,cellEditValidatorEvent:"click",className:null,colSpan:null,columnKey:null,dataType:"text",editor:null,excludeGlobalFilter:!1,expander:!1,exportField:null,exportable:!0,field:null,filter:!1,filterApply:null,filterClear:null,filterElement:null,filterField:null,filterFooter:null,filterFunction:null,filterHeader:null,filterHeaderClassName:null,filterHeaderStyle:null,filterMatchMode:null,filterMatchModeOptions:null,filterMaxLength:null,filterMenuClassName:null,filterMenuStyle:null,filterPlaceholder:null,filterType:"text",footer:null,footerClassName:null,footerStyle:null,frozen:!1,header:null,headerClassName:null,headerStyle:null,headerTooltip:null,headerTooltipOptions:null,hidden:!1,maxConstraints:2,onBeforeCellEditHide:null,onBeforeCellEditShow:null,onCellEditCancel:null,onCellEditComplete:null,onCellEditInit:null,onFilterApplyClick:null,onFilterClear:null,onFilterConstraintAdd:null,onFilterConstraintRemove:null,onFilterMatchModeChange:null,onFilterOperatorChange:null,reorderable:!0,resizeable:!0,rowEditor:!1,rowReorder:!1,rowReorderIcon:null,rowSpan:null,selectionMode:null,showAddButton:!0,showApplyButton:!0,showClearButton:!0,showFilterMatchModes:!0,showFilterMenu:!0,showFilterMenuOptions:!0,showFilterOperator:!0,sortField:null,sortFunction:null,sortable:!1,sortableDisabled:!1,style:null,children:void 0},getCProp:function(e,t){return a.getComponentProp(e,t,W.defaultProps)},getCProps:function(e){return a.getComponentProps(e,W.defaultProps)},getCOtherProps:function(e){return a.getComponentDiffProps(e,W.defaultProps)}},_={defaultProps:{__TYPE:"TreeTable",alwaysShowPaginator:!0,checkboxIcon:null,className:null,columnResizeMode:"fit",contextMenuSelectionKey:null,currentPageReportTemplate:"({currentPage} of {totalPages})",defaultSortOrder:1,emptyMessage:null,expandedKeys:null,filterDelay:300,filterLocale:void 0,filterMode:"lenient",filters:null,first:null,footer:null,footerColumnGroup:null,frozenFooterColumnGroup:null,frozenHeaderColumnGroup:null,frozenWidth:null,globalFilter:null,globalFilterMatchMode:n.CONTAINS,header:null,headerColumnGroup:null,id:null,lazy:!1,loading:!1,loadingIcon:null,metaKeySelection:!0,multiSortMeta:null,onColReorder:null,onCollapse:null,onColumnResizeEnd:null,onContextMenu:null,onContextMenuSelectionChange:null,onExpand:null,onFilter:null,onPage:null,onRowClick:null,onSelect:null,onSelectionChange:null,onSort:null,onToggle:null,onUnselect:null,pageLinkSize:5,paginator:!1,paginatorClassName:null,paginatorDropdownAppendTo:null,paginatorLeft:null,paginatorPosition:"bottom",paginatorRight:null,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",propagateSelectionDown:!0,propagateSelectionUp:!0,removableSort:!1,reorderableColumns:!1,reorderIndicatorDownIcon:null,reorderIndicatorUpIcon:null,resizableColumns:!1,rowClassName:null,rowHover:!1,rows:null,rowsPerPageOptions:null,scrollHeight:null,scrollable:!1,selectOnEdit:!0,selectionKeys:null,selectionMode:null,showGridlines:!1,sortField:null,sortMode:"single",sortIcon:null,sortOrder:null,stripedRows:!1,style:null,tabIndex:0,tableClassName:null,tableStyle:null,totalRecords:null,value:null,children:void 0},getProps:function(e){return a.getMergedProps(e,_.defaultProps)},getOtherProps:function(e){return a.getDiffProps(e,_.defaultProps)}},V=function(t){var n=G(e.useState(!1),2),r=n[0],l=n[1],o=e.useRef(null),u=e.useRef(null),d=e.useRef(!1),p=e.useRef(null),m=e.useRef(null),g=G(s({type:"click",listener:function(e){!d.current&&S(e.target)&&E(e),d.current=!1}}),2),b=g[0],h=g[1],v=function(){t.editor&&!r&&(t.selectOnEdit||!t.selectOnEdit&&t.selected)&&(d.current=!0,l(!0),b(),p.current=function(e){S(e.target)||(d.current=!0)},y.on("overlay-click",p.current))},S=function(e){return o.current&&!(o.current.isSameNode(e)||o.current.contains(e))},C=function(){setTimeout((function(){l(!1),h(),y.off("overlay-click",p.current),p.current=null}),1)},E=function(e){t.cellEditValidator?t.cellEditValidator({originalEvent:e,columnProps:t})&&C():C()};e.useEffect((function(){if(o.current&&t.editor)if(clearTimeout(m.current),r){var e=i.findSingle(o.current,"input");e&&document.activeElement!==e&&!e.hasAttribute("data-isCellEditing")&&(e.setAttribute("data-isCellEditing",!0),e.focus()),u.current.tabIndex=-1}else m.current=setTimeout((function(){u.current&&u.current.setAttribute("tabindex",0)}),50)})),f((function(){p.current&&(y.off("overlay-click",p.current),p.current=null)}));var w,x=a.getPropValue(t.bodyClassName,t.node.data,{field:t.field,rowIndex:t.rowIndex,props:t}),k=c(x||t.className,{"p-editable-column":t.editor,"p-cell-editing":!!t.editor&&r}),O=t.bodyStyle||t.style;if(r){if(!t.editor)throw new Error("Editor is not found on column.");w=a.getJSXElement(t.editor,{node:t.node,rowData:t.node.data,value:a.resolveFieldData(t.node.data,t.field),field:t.field,rowIndex:t.rowIndex,props:t})}else w=t.body?a.getJSXElement(t.body,t.node,{field:t.field,rowIndex:t.rowIndex,props:t}):a.resolveFieldData(t.node.data,t.field);var P=t.editor&&e.createElement("a",{tabIndex:0,ref:u,className:"p-cell-editor-key-helper p-hidden-accessible",onFocus:function(e){v()}},e.createElement("span",null));return e.createElement("td",{ref:o,className:k,style:O,onClick:v,onKeyDown:function(e){13!==e.which&&9!==e.which||E(e)}},t.children,P,w)};function X(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=B(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}function B(e,t){if(e){if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}V.displayName="TreeTableBodyCell";var q=e.memo((function(t){var n=e.useRef(null),l=e.useRef(null),o=e.useRef(null),a=e.useRef(!1),s=!!t.expandedKeys&&void 0!==t.expandedKeys[t.node.key],f=function(e,t){return W.getCProp(e,t)},d=function(e){s?y(e):p(e),e.preventDefault(),e.stopPropagation()},p=function(e){var n=t.expandedKeys?$({},t.expandedKeys):{};n[t.node.key]=!0,t.onToggle({originalEvent:e,value:n}),S(e,!0)},y=function(e){var n=$({},t.expandedKeys);delete n[t.node.key],t.onToggle({originalEvent:e,value:n}),S(e,!1)},S=function(e,n){n?t.onExpand&&t.onExpand({originalEvent:e,node:t.node}):t.onCollapse&&t.onCollapse({originalEvent:e,node:t.node})},C=function(e){t.onRowClick&&t.onRowClick(e,t.node),a.current=!1},E=function(e){var n=N(),r=t.selectionKeys?$({},t.selectionKeys):{};n?(t.propagateSelectionDown?O(t.node,!1,r):delete r[t.node.key],t.propagateSelectionUp&&t.onPropagateUp&&t.onPropagateUp({originalEvent:e,check:!1,selectionKeys:r}),t.onUnselect&&t.onUnselect({originalEvent:e,node:t.node})):(t.propagateSelectionDown?O(t.node,!0,r):r[t.node.key]={checked:!0},t.propagateSelectionUp&&t.onPropagateUp&&t.onPropagateUp({originalEvent:e,check:!0,selectionKeys:r}),t.onSelect&&t.onSelect({originalEvent:e,node:t.node})),t.onSelectionChange&&t.onSelectionChange({originalEvent:e,value:r}),i.clearSelection()},w=function(){i.addClass(o.current,"p-focus"),i.addClass(l.current,"p-checkbox-focused")},x=function(){i.removeClass(o.current,"p-focus"),i.removeClass(l.current,"p-checkbox-focused")},k=function(e){var n,r=e.check,l=e.selectionKeys,o=0,a=!1,i=X(t.node.children);try{for(i.s();!(n=i.n()).done;){var c=n.value;l[c.key]&&l[c.key].checked?o++:l[c.key]&&l[c.key].partialChecked&&(a=!0)}}catch(e){i.e(e)}finally{i.f()}r&&o===t.node.children.length?l[t.node.key]={checked:!0,partialChecked:!1}:(r||delete l[t.node.key],l[t.node.key]=a||o>0&&o!==t.node.children.length?{checked:!1,partialChecked:!0}:{checked:!1,partialChecked:!1}),t.propagateSelectionUp&&t.onPropagateUp&&t.onPropagateUp(e)},O=function e(t,n,r){if(n?r[t.key]={checked:!0,partialChecked:!1}:delete r[t.key],t.children&&t.children.length)for(var l=0;l<t.children.length;l++)e(t.children[l],n,r)},P=function(){return!("single"!==t.selectionMode&&"multiple"!==t.selectionMode||!t.selectionKeys)&&("single"===t.selectionMode?t.selectionKeys===t.node.key:void 0!==t.selectionKeys[t.node.key])},N=function(){return!!t.selectionKeys&&(t.selectionKeys[t.node.key]&&t.selectionKeys[t.node.key].checked)},I=function(){if("checkbox"===t.selectionMode&&!1!==t.node.selectable){var n=N(),r=!!t.selectionKeys&&t.selectionKeys[t.node.key]&&t.selectionKeys[t.node.key].partialChecked,a=c("p-checkbox-box",{"p-highlight":n,"p-indeterminate":r}),i="p-checkbox-icon p-c",s=u.getJSXIcon(n?t.checkboxIcon||e.createElement(h,{className:i}):r?t.checkboxIcon||e.createElement(v,{className:i}):null,{className:i},{props:t,checked:n,partialChecked:r});return e.createElement("div",{className:"p-checkbox p-treetable-checkbox p-component",ref:l,onClick:E,role:"checkbox","aria-checked":n},e.createElement("div",{className:"p-hidden-accessible"},e.createElement("input",{type:"checkbox",onFocus:w,onBlur:x})),e.createElement("div",{className:a,ref:o},s))}return null},K=t.columns.map((function(n,l){var o,a,i,c,p;return f(n,"expander")&&(i=r(s?"collapseLabel":"expandLabel"),c={className:"p-treetable-toggler-icon","aria-hidden":!0},p=u.getJSXIcon(t.togglerIcon||e.createElement(s?g:b,c),$({},c),{props:t}),o=e.createElement("button",{type:"button",className:"p-treetable-toggler p-link p-unselectable-text",onClick:d,tabIndex:-1,style:{marginLeft:16*t.level+"px",visibility:!1===t.node.leaf||t.node.children&&t.node.children.length?"visible":"hidden"},"aria-label":i},p,e.createElement(m,null)),a=I()),e.createElement(V,M({key:"".concat(f(n,"columnKey")||f(n,"field"),"_").concat(l)},W.getCProps(n),{column:n,selectOnEdit:t.selectOnEdit,selected:P(),node:t.node,rowIndex:t.rowIndex}),o,a)})),R=s&&t.node.children?t.node.children.map((function(n,r){return e.createElement(q,{key:"".concat(n.key||JSON.stringify(n.data),"_").concat(r),level:t.level+1,rowIndex:t.rowIndex+"_"+r,node:n,checkboxIcon:t.checkboxIcon,columns:t.columns,expandedKeys:t.expandedKeys,selectOnEdit:t.selectOnEdit,onToggle:t.onToggle,onExpand:t.onExpand,onCollapse:t.onCollapse,selectionMode:t.selectionMode,selectionKeys:t.selectionKeys,onSelectionChange:t.onSelectionChange,metaKeySelection:t.metaKeySelection,onRowClick:t.onRowClick,onSelect:t.onSelect,onUnselect:t.onUnselect,propagateSelectionUp:t.propagateSelectionUp,propagateSelectionDown:t.propagateSelectionDown,onPropagateUp:k,rowClassName:t.rowClassName,contextMenuSelectionKey:t.contextMenuSelectionKey,onContextMenuSelectionChange:t.onContextMenuSelectionChange,onContextMenu:t.onContextMenu})})):null,D={"p-highlight":P(),"p-highlight-contextmenu":t.contextMenuSelectionKey&&t.contextMenuSelectionKey===t.node.key};if(t.rowClassName){var T=t.rowClassName(t.node);D=$($({},D),T)}return D=c(D,t.node.className),e.createElement(e.Fragment,null,e.createElement("tr",{ref:n,tabIndex:0,className:D,style:t.node.style,onClick:C,onTouchEnd:function(){a.current=!0},onContextMenu:function(e){i.clearSelection(),t.onContextMenuSelectionChange&&t.onContextMenuSelectionChange({originalEvent:e,value:t.node.key}),t.onContextMenu&&t.onContextMenu({originalEvent:e,node:t.node})},onKeyDown:function(e){if(e.target===n.current){var t=e.currentTarget;switch(e.which){case 40:var r=t.nextElementSibling;r&&r.focus(),e.preventDefault();break;case 38:var l=t.previousElementSibling;l&&l.focus(),e.preventDefault();break;case 39:s||p(e),e.preventDefault();break;case 37:s&&y(e),e.preventDefault();break;case 13:C(e),e.preventDefault()}}}},K),R)}));function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=te(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}function te(e,t){if(e){if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}q.displayName="TreeTableRow";var re=e.memo((function(t){var n="single"===t.selectionMode,r="multiple"===t.selectionMode,o=function e(n){var r,l=[],o=ee(n=n||t.value);try{for(o.s();!(r=o.n()).done;){var i=r.value;l.push(i.key),a(i.key)&&(l=l.concat(e(i.children)))}}catch(e){o.e(e)}finally{o.f()}return l},a=function(e){return t.expandedKeys&&!!t.expandedKeys[e]},c=function(e,l){t.onRowClick&&t.onRowClick({originalEvent:e,node:l});var a=e.target.nodeName;if("INPUT"!==a&&"BUTTON"!==a&&"A"!==a&&!i.hasClass(e.target,"p-clickable")&&(n||r)&&!1!==l.selectable){var c,s=u(l),f=t.metaKeySelection,d=o(),p=d.findIndex((function(e){return e===l.key}));if(r&&e.shiftKey){i.clearSelection();var m=d.findIndex((function(e){return t.selectionKeys[e]})),y=Math.min(p,m),g=Math.max(p,m);c=Z({},t.selectionKeys);for(var b=y;b<=g;b++){c[d[b]]=!0}}else if(f){var h=e.metaKey||e.ctrlKey;s&&h?(n?c=null:delete(c=Z({},t.selectionKeys))[l.key],t.onUnselect&&t.onUnselect({originalEvent:e,node:l})):(n?c=l.key:r&&((c=h&&t.selectionKeys?Z({},t.selectionKeys):{})[l.key]=!0),t.onSelect&&t.onSelect({originalEvent:e,node:l}))}else n?s?(c=null,t.onUnselect&&t.onUnselect({originalEvent:e,node:l})):(c=l.key,t.onSelect&&t.onSelect({originalEvent:e,node:l})):s?(delete(c=Z({},t.selectionKeys))[l.key],t.onUnselect&&t.onUnselect({originalEvent:e,node:l})):((c=t.selectionKeys?Z({},t.selectionKeys):{})[l.key]=!0,t.onSelect&&t.onSelect({originalEvent:e,node:l}));t.onSelectionChange&&t.onSelectionChange({originalEvent:e,value:c})}},u=function(e){return!(!n&&!r||!t.selectionKeys)&&(n?t.selectionKeys===e.key:void 0!==t.selectionKeys[e.key])},s=function(n,r){return e.createElement(q,{key:"".concat(n.key||JSON.stringify(n.data),"_").concat(r),level:0,rowIndex:r,selectOnEdit:t.selectOnEdit,node:n,checkboxIcon:t.checkboxIcon,columns:t.columns,expandedKeys:t.expandedKeys,onToggle:t.onToggle,onExpand:t.onExpand,onCollapse:t.onCollapse,selectionMode:t.selectionMode,selectionKeys:t.selectionKeys,onSelectionChange:t.onSelectionChange,metaKeySelection:t.metaKeySelection,onRowClick:c,onSelect:t.onSelect,onUnselect:t.onUnselect,propagateSelectionUp:t.propagateSelectionUp,propagateSelectionDown:t.propagateSelectionDown,rowClassName:t.rowClassName,contextMenuSelectionKey:t.contextMenuSelectionKey,onContextMenuSelectionChange:t.onContextMenuSelectionChange,onContextMenu:t.onContextMenu})},f=t.value&&t.value.length?function(){if(t.paginator&&!t.lazy){for(var e=t.first||0,n=e+(t.rows||0),r=[],l=e;l<n;l++){if(!t.value[l])break;r.push(s(t.value[l]))}return r}return t.value.map(s)}():function(){if(t.loading)return null;var n=t.columns?t.columns.length:null,r=t.emptyMessage||l("emptyMessage");return e.createElement("tr",null,e.createElement("td",{className:"p-treetable-emptymessage",colSpan:n},r))}();return e.createElement("tbody",{className:"p-treetable-tbody"},f)}));re.displayName="TreeTableBody";var le={defaultProps:{__TYPE:"ColumnGroup",children:void 0},getCProp:function(e,t){return a.getComponentProp(e,t,le.defaultProps)},getCProps:function(e){return a.getComponentProps(e,le.defaultProps)}},oe={defaultProps:{__TYPE:"Row",style:null,className:null,children:void 0},getProps:function(e){return a.getMergedProps(e,oe.defaultProps)},getOtherProps:function(e){return a.getDiffProps(e,oe.defaultProps)},getCProp:function(e,t){return a.getComponentProp(e,t,oe.defaultProps)}},ae=e.memo((function(t){var n=function(e,t){return W.getCProp(e,t)},r=function(t,r){return e.createElement("td",{key:t.field||r,className:n(t,"footerClassName")||n(t,"className"),style:n(t,"footerStyle")||n(t,"style"),rowSpan:n(t,"rowSpan"),colSpan:n(t,"colSpan")},n(t,"footer"))},l=function(t,n){var l=e.Children.toArray(oe.getCProp(t,"children")).map(r);return e.createElement("tr",{key:n},l)},o=t.columnGroup?e.Children.toArray(le.getCProp(t.columnGroup,"children")).map(l):function(t){if(t){var n=t.map(r);return e.createElement("tr",null,n)}return null}(t.columns);return function(){if(t.columnGroup)return!0;for(var e=0;e<t.columns.length;e++)if(n(t.columns[e],"footer"))return!0;return!1}()?e.createElement("tfoot",{className:"p-treetable-tfoot"},o):null}));function ie(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ce(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}function ce(e,t){if(e){if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ue(e,t):void 0}}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ae.displayName="TreeTableFooter";var se=e.memo((function(t){var n,r=e.useRef(null),l=function(e,n){if(k(n,"sortable")){var r=e.target;(i.hasClass(r,"p-sortable-column")||i.hasClass(r,"p-column-title")||i.hasClass(r,"p-sortable-column-icon")||i.hasClass(r.parentElement,"p-sortable-column-icon"))&&(t.onSort({originalEvent:e,sortField:k(n,"sortField")||k(n,"field"),sortFunction:k(n,"sortFunction"),sortable:k(n,"sortable")}),i.clearSelection())}},o=function(e,n){t.reorderableColumns&&k(n,"reorderable")&&("INPUT"!==e.target.nodeName?e.currentTarget.draggable=!0:"INPUT"===e.target.nodeName&&(e.currentTarget.draggable=!1))},s=function(e,t){"Enter"===e.key&&(l(e,t),e.preventDefault())},f=function(e){if(t.multiSortMeta)for(var n=0;n<t.multiSortMeta.length;n++)if(t.multiSortMeta[n].field===k(e,"field"))return n;return-1},d=function(e,n){t.resizableColumns&&t.onResizeStart&&t.onResizeStart({originalEvent:e,columnEl:e.target.parentElement,column:n})},p=function(e,n){t.onDragStart&&t.onDragStart({originalEvent:e,column:n})},m=function(e,n){t.onDragOver&&t.onDragOver({originalEvent:e,column:n})},y=function(e,n){t.onDragLeave&&t.onDragLeave({originalEvent:e,column:n})},g=function(e,n){t.onDrop&&t.onDrop({originalEvent:e,column:n})},b=function(e,n){if(k(n,"filter")&&t.onFilter){r.current&&clearTimeout(r.current);var l=e.target.value;r.current=setTimeout((function(){t.onFilter({value:l,field:k(n,"field"),matchMode:k(n,"filterMatchMode")||"startsWith"}),r.current=null}),t.filterDelay)}},h=function(e){if(e){var t,n=ie(e);try{for(n.s();!(t=n.n()).done;){if(k(t.value,"filter"))return!0}}catch(e){n.e(e)}finally{n.f()}}return!1},v=function(e,t,n){return k(e,"sortable")?t&&n<0?"descending":t&&n>0?"ascending":"none":null},k=function(e){return e?"string"==typeof(arguments.length<=1?void 0:arguments[1])?W.getCProp(e,arguments.length<=1?void 0:arguments[1]):W.getCProp((arguments.length<=1?void 0:arguments[1])||e,arguments.length<=2?void 0:arguments[2]):null},O=function(n,r,l){if(k(n,"sortable")){var o="p-sortable-column-icon";return u.getJSXIcon(t.sortIcon||e.createElement(r?l<0?w:x:E,{className:o}),{className:o},{props:t,sorted:r,sortOrder:l})}return null},P=function(n){return t.resizableColumns?e.createElement("span",{className:"p-column-resizer p-clickable",onMouseDown:function(e){return d(e,n)}}):null},N=function(n){return-1!==n&&t.multiSortMeta&&t.multiSortMeta.length>1?e.createElement("span",{className:"p-sortable-column-badge"},n+1):null},I=function(n,r){var i;if(k(n,"filter")&&r.renderFilter&&(i=k(n,"filterElement")||e.createElement(S,{onInput:function(e){return b(e,n)},type:t.filterType,defaultValue:t.filters&&t.filters[k(n,"field")]?t.filters[k(n,"field")].value:null,className:"p-column-filter",placeholder:k(n,"filterPlaceholder"),maxLength:k(n,"filterMaxLength")})),r.filterOnly)return e.createElement("th",{key:k(n,"columnKey")||k(n,"field")||r.index,className:c("p-filter-column",k(n,"filterHeaderClassName")),style:k(n,"filterHeaderStyle")||k(n,"style"),rowSpan:k(n,"rowSpan"),colSpan:k(n,"colSpan")},i);var u=e.createRef(null),d=f(n),h=-1!==d?t.multiSortMeta[d]:null,E=k(n,"field")===t.sortField,w=null!==h,x=k(n,"sortable")&&(E||w),I=0;E?I=t.sortOrder:w&&(I=h.order);var K=O(n,x,I),R=v(n,x,I),D=N(d),T=c(k(n,"headerClassName")||k(n,"className"),{"p-sortable-column":k(n,"sortable"),"p-highlight":x,"p-resizable-column":t.resizableColumns&&k(n,"resizeable")}),F=k(n,"headerTooltip"),z=a.isNotEmpty(F),j=P(n);return e.createElement(e.Fragment,{key:n.columnKey||n.field||r.index},e.createElement("th",{ref:u,className:T,style:k(n,"headerStyle")||k(n,"style"),tabIndex:k(n,"sortable")?t.tabIndex:null,onClick:function(e){return l(e,n)},onMouseDown:function(e){return o(e,n)},onKeyDown:function(e){return s(e,n)},rowSpan:k(n,"rowSpan"),colSpan:k(n,"colSpan"),"aria-sort":R,onDragStart:function(e){return p(e,n)},onDragOver:function(e){return m(e,n)},onDragLeave:function(e){return y(e,n)},onDrop:function(e){return g(e,n)}},j,e.createElement("span",{className:"p-column-title"},k(n,"header")),K,D,i),z&&e.createElement(C,M({target:u,content:F},k(n,"headerTooltipOptions"))))},K=function(t,n){var r=e.Children.toArray(oe.getCProp(t,"children")).map((function(e,t){return I(e,{index:t,filterOnly:!1,renderFilter:!0})}));return e.createElement("tr",{key:n},r)},R=t.columnGroup?e.Children.toArray(le.getCProp(t.columnGroup,"children")).map(K):(n=t.columns)?h(n)?e.createElement(e.Fragment,null,e.createElement("tr",null,n.map((function(e,t){return I(e,{index:t,filterOnly:!1,renderFilter:!1})}))),e.createElement("tr",null,n.map((function(e,t){return I(e,{index:t,filterOnly:!0,renderFilter:!0})})))):e.createElement("tr",null,n.map((function(e,t){return I(e,{index:t,filterOnly:!1,renderFilter:!1})}))):null;return e.createElement("thead",{className:"p-treetable-thead"},R)}));se.displayName="TreeTableHeader";var fe=e.memo((function(t){var n=e.useRef(null),r=e.useRef(null),l=e.useRef(null),o=e.useRef(null),u=e.useRef(null),s=e.useRef(null),f=e.useRef(null),p=function(){if(t.scrollHeight)if(-1!==t.scrollHeight.indexOf("%")){var e=m(n.current);o.current.style.visibility="hidden",o.current.style.height="100px";var r=i.getOuterHeight(e),l=i.getOuterHeight(e.parentElement)*parseInt(t.scrollHeight,10)/100-(r-100);o.current.style.height="auto",o.current.style.maxHeight=l+"px",o.current.style.visibility="visible"}else o.current.style.maxHeight=t.scrollHeight},m=function(e){if(e){for(var t=e;t&&!i.hasClass(t,"p-treetable");)t=t.parentElement;return t}return null};d((function(){if(t.frozen)o.current.style.paddingBottom=i.calculateScrollbarWidth()+"px";else{var e=i.calculateScrollbarWidth();l.current.style.marginRight=e+"px",f.current&&(f.current.style.marginRight=e+"px")}})),e.useEffect((function(){p()}));var y=c("p-treetable-scrollable-view",{"p-treetable-frozen-view":t.frozen,"p-treetable-unfrozen-view":!t.frozen&&t.frozenWidth}),g=t.frozen?t.frozenWidth:"calc(100% - "+t.frozenWidth+")",b=t.frozen?null:t.frozenWidth,h=function(){if(a.isNotEmpty(t.columns)){var n=t.columns.map((function(t,n){return e.createElement("col",{key:t.field+"_"+n})}));return e.createElement("colgroup",{className:"p-treetable-scrollable-colgroup"},n)}return null}(),v=!t.frozen&&t.scrollHeight?{overflowY:"scroll"}:null;return e.createElement("div",{className:y,style:{width:g,left:b},ref:n},e.createElement("div",{className:"p-treetable-scrollable-header",ref:r,onScroll:function(){r.current.scrollLeft=0}},e.createElement("div",{className:"p-treetable-scrollable-header-box",ref:l},e.createElement("table",{className:"p-treetable-scrollable-header-table"},h,t.header))),e.createElement("div",{className:"p-treetable-scrollable-body",ref:o,style:v,onScroll:function(){var e,t=n.current.previousElementSibling;t&&(e=i.findSingle(t,".p-treetable-scrollable-body")),l.current.style.marginLeft=-1*o.current.scrollLeft+"px",f.current&&(f.current.style.marginLeft=-1*o.current.scrollLeft+"px"),e&&(e.scrollTop=o.current.scrollTop)}},e.createElement("table",{ref:u,style:{top:"0"},className:"p-treetable-scrollable-body-table"},h,t.body)),e.createElement("div",{className:"p-treetable-scrollable-footer",ref:s},e.createElement("div",{className:"p-treetable-scrollable-footer-box",ref:f},e.createElement("table",{className:"p-treetable-scrollable-footer-table"},h,t.footer))))}));function de(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=pe(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}function pe(e,t){if(e){if("string"==typeof e)return me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?me(e,t):void 0}}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}fe.displayName="TreeTableScrollableView";var be=e.forwardRef((function(n,r){var l=_.getProps(n),f=G(e.useState(l.expandedKeys),2),d=f[0],m=f[1],y=G(e.useState(l.first),2),g=y[0],b=y[1],h=G(e.useState(l.rows),2),v=h[0],S=h[1],C=G(e.useState(l.sortField),2),E=C[0],w=C[1],x=G(e.useState(l.sortOrder),2),N=x[0],I=x[1],K=G(e.useState(l.multiSortMeta),2),R=K[0],D=K[1],T=G(e.useState(l.filters),2),F=T[0],z=T[1],j=G(e.useState([]),2),U=j[0],H=j[1],L=e.useRef(null),V=e.useRef(null),X=e.useRef(null),B=e.useRef(null),J=e.useRef(null),Y=e.useRef(null),$=e.useRef(null),q=e.useRef(null),Q=e.useRef(0),Z=e.useRef(0),ee=e.useRef(0),te=e.useRef(null),ne=e.useRef(null),le=e.useRef(null),oe=e.useRef(null),ie=e.useRef(null),ce=e.useRef(null),ue=G(s({type:"mousemove",listener:function(e){Y.current&&ze(e)}}),2),pe=ue[0],me=ue[1],ye=G(s({type:"mouseup",listener:function(e){Y.current&&(Y.current=!1,je())}}),2),he=ye[0],ve=ye[1],Se=function(e){l.onToggle?l.onToggle(e):m(e.value)},Ce=function(e){l.onPage?l.onPage(e):(b(e.first),S(e.rows))},Ee=function(e){var t,n,r=e.sortField,o=l.defaultSortOrder;if(oe.current=e.sortable,ie.current=e.sortFunction,ce.current=e.sortField,"multiple"===l.sortMode){var a=e.originalEvent.metaKey||e.originalEvent.ctrlKey;if((t=A(Qe()))&&t instanceof Array){var i=t.find((function(e){return e.field===r}));o=i?we(i.order):o}var c={field:r,order:o};o?(t&&a||(t=[]),xe(c,t)):l.removableSort&&t&&ke(c,t),n={multiSortMeta:t}}else o=$e()===r?we(qe()):o,l.removableSort&&(r=o?r:null),n={sortField:r,sortOrder:o};l.onSort?l.onSort(n):(b(0),w(n.sortField),I(n.sortOrder),D(n.multiSortMeta))},we=function(e){return l.removableSort?l.defaultSortOrder===e?-1*e:0:-1*e},xe=function(e,t){for(var n=-1,r=0;r<t.length;r++)if(t[r].field===e.field){n=r;break}n>=0?t[n]=e:t.push(e)},ke=function(e,t){for(var n=-1,r=0;r<t.length;r++)if(t[r].field===e.field){n=r;break}n>=0&&t.splice(n,1),t=t.length>0?t:null},Oe=function(e){return Pe(e)},Pe=function e(t){var n=A(t);if(oe.current&&"custom"===oe.current&&ie.current)n=ie.current({data:t,field:$e(),order:qe()});else{n.sort((function(e,t){var n=$e(),r=a.resolveFieldData(e.data,n),l=a.resolveFieldData(t.data,n);return Ke(r,l,qe())}));for(var r=0;r<n.length;r++)n[r].children&&n[r].children.length&&(n[r].children=e(n[r].children))}return n},Me=function(e){var t=Qe();return t?Ne(e,t):e},Ne=function e(t,n){var r=A(t);r.sort((function(e,t){return Ie(e,t,n,0)}));for(var l=0;l<r.length;l++)r[l].children&&r[l].children.length&&(r[l].children=e(r[l].children,n));return r},Ie=function e(n,r,l,o){var i=a.resolveFieldData(n.data,l[o].field),c=a.resolveFieldData(r.data,l[o].field);return 0===a.compare(i,c,t.locale)?l.length-1>o?e(n,r,l,o+1):0:Ke(i,c,l[o].order)},Ke=function(e,n,r){return a.sort(e,n,r,t.locale,t.nullSortOrder)},Re=function(e,t,n){De({value:e,field:t,matchMode:n})},De=function(e){var t=Ze(),n=t?ge({},t):{};Te(e.value)?n[e.field]&&delete n[e.field]:n[e.field]={value:e.value,matchMode:e.matchMode},l.onFilter?l.onFilter({filters:n}):(b(0),z(n))},Te=function(e){return null==e||("string"==typeof e&&0===e.trim().length||e instanceof Array&&0===e.length)},Fe=function(e){var t=i.getOffset(L.current).left;$.current=e.columnEl,q.current=e.column,Y.current=!0,Q.current=e.originalEvent.pageX-t+L.current.scrollLeft,He()},ze=function(e){var t=i.getOffset(L.current).left;i.addClass(L.current,"p-unselectable-text"),X.current.style.height=L.current.offsetHeight+"px",X.current.style.top="0px",X.current.style.left=e.pageX-t+L.current.scrollLeft+"px",X.current.style.display="block"},je=function(e){var t=X.current.offsetLeft-Q.current,n=$.current.offsetWidth,r=n+t;if(n+t>parseInt($.current.style.minWidth||15,10)){if("fit"===l.columnResizeMode){var o=$.current.nextElementSibling,a=o.offsetWidth-t;if(r>15&&a>15)if(l.scrollable){var c=Ae($.current),u=i.findSingle(c,"table.p-treetable-scrollable-body-table"),s=i.findSingle(c,"table.p-treetable-scrollable-header-table"),f=i.findSingle(c,"table.p-treetable-scrollable-footer-table"),d=i.index($.current);Ue(s,d,r,a),Ue(u,d,r,a),Ue(f,d,r,a)}else $.current.style.width=r+"px",o&&(o.style.width=a+"px")}else if("expand"===l.columnResizeMode)if(l.scrollable){var p=Ae($.current),m=i.findSingle(p,"table.p-treetable-scrollable-body-table"),y=i.findSingle(p,"table.p-treetable-scrollable-header-table"),g=i.findSingle(p,"table.p-treetable-scrollable-footer-table");m.style.width=m.offsetWidth+t+"px",y.style.width=y.offsetWidth+t+"px",g&&(g.style.width=y.offsetWidth+t+"px");var b=i.index($.current);Ue(y,b,r,null),Ue(m,b,r,null),Ue(g,b,r,null)}else V.current.style.width=V.current.offsetWidth+t+"px",$.current.style.width=r+"px";l.onColumnResizeEnd&&l.onColumnResizeEnd({element:$.current,column:q.current,delta:t})}X.current.style.display="none",$.current=null,q.current=null,i.removeClass(L.current,"p-unselectable-text"),Le()},Ae=function(e){if(e){for(var t=e.parentElement;t&&!i.hasClass(t,"p-treetable-scrollable-view");)t=t.parentElement;return t}return null},Ue=function(e,t,n,r){if(e){var l="COLGROUP"===e.children[0].nodeName?e.children[0]:null;if(!l)throw new Error("Scrollable tables require a colgroup to support resizable columns");var o=l.children[t],a=o.nextElementSibling;o.style.width=n+"px",a&&r&&(a.style.width=r+"px")}},He=function(){pe(),he()},Le=function(){me(),ve()},Ge=function(e){var t=e.originalEvent,n=e.column;Y.current?t.preventDefault():(Z.current=i.getHiddenElementOuterWidth(B.current),ee.current=i.getHiddenElementOuterHeight(B.current),te.current=Xe(t.currentTarget),ne.current=n,t.dataTransfer.setData("text","b"))},We=function(e){var t=e.originalEvent,n=Xe(t.currentTarget);if(l.reorderableColumns&&te.current&&n){t.preventDefault();var r=i.getOffset(L.current),o=i.getOffset(n);if(te.current!==n){var a=o.left-r.left,c=o.left+n.offsetWidth/2;B.current.style.top=o.top-r.top-(ee.current-1)+"px",J.current.style.top=o.top-r.top+n.offsetHeight+"px",t.pageX>c?(B.current.style.left=a+n.offsetWidth-Math.ceil(Z.current/2)+"px",J.current.style.left=a+n.offsetWidth-Math.ceil(Z.current/2)+"px",le.current=1):(B.current.style.left=a-Math.ceil(Z.current/2)+"px",J.current.style.left=a-Math.ceil(Z.current/2)+"px",le.current=-1),B.current.style.display="block",J.current.style.display="block"}}},_e=function(e){l.reorderableColumns&&te.current&&(e.originalEvent.preventDefault(),B.current.style.display="none",J.current.style.display="none")},Ve=function(t){var n=t.originalEvent,r=t.column;if(n.preventDefault(),te.current){var o=i.index(te.current),c=i.index(Xe(n.currentTarget)),u=o!==c;if(u&&(c-o==1&&-1===le.current||o-c==1&&1===le.current)&&(u=!1),u){var s=U?tt():e.Children.toArray(l.children),f=function(e,t){return Be(e,"columnKey")||Be(t,"columnKey")?a.equals(e,t,"props.columnKey"):a.equals(e,t,"props.field")},d=s.findIndex((function(e){return f(e,ne.current)})),p=s.findIndex((function(e){return f(e,r)}));p<d&&1===le.current&&p++,p>d&&-1===le.current&&p--,a.reorderArray(s,d,p);var m,y=[],g=de(s);try{for(g.s();!(m=g.n()).done;){var b=m.value;y.push(Be(b,"columnKey")||Be(b,"field"))}}catch(e){g.e(e)}finally{g.f()}H(y),l.onColReorder&&l.onColReorder({dragIndex:d,dropIndex:p,columns:s})}B.current.style.display="none",J.current.style.display="none",te.current.draggable=!1,te.current=null,le.current=null}},Xe=function(e){if("TH"===e.nodeName)return e;for(var t=e.parentElement;"TH"!==t.nodeName&&(t=t.parentElement););return t},Be=function(e,t){return W.getCProp(e,t)},Je=function(){return l.onPage?l.first:g},Ye=function(){return l.onPage?l.rows:v},$e=function(){return l.onSort?l.sortField:E},qe=function(){return l.onSort?l.sortOrder:N},Qe=function(){return(l.onSort?l.multiSortMeta:R)||[]},Ze=function(){return l.onFilter?l.filters:F},et=function(e,t){if(e&&e.length)for(var n=0;n<e.length;n++){var r=e[n];if(Be(r,"columnKey")===t||Be(r,"field")===t)return r}return null},tt=function(){var t=e.Children.toArray(l.children);if(t&&t.length){if(l.reorderableColumns&&U){var n,r=[],o=de(U);try{for(o.s();!(n=o.n()).done;){var a=et(t,n.value);a&&r.push(a)}}catch(e){o.e(e)}finally{o.f()}return[].concat(r,A(t.filter((function(e){return r.indexOf(e)<0}))))}return t}return null},nt=function(e){var t,n=null,r=de(e);try{for(r.s();!(t=r.n()).done;){var l=t.value;Be(l,"frozen")&&(n=n||[]).push(l)}}catch(e){r.e(e)}finally{r.f()}return n},rt=function(e){var t,n=null,r=de(e);try{for(r.s();!(t=r.n()).done;){var l=t.value;Be(l,"frozen")||(n=n||[]).push(l)}}catch(e){r.e(e)}finally{r.f()}return n},lt=function(t){var n,r=[],a=Ze(),i=e.Children.toArray(l.children),c="strict"===l.filterMode,u=de(t);try{for(u.s();!(n=u.n()).done;){for(var s=n.value,f=ge({},s),d=!0,p=!1,m=0;m<i.length;m++){var y=i[m],g=a?a[Be(y,"field")]:null,b=Be(y,"field"),h=void 0;if(g){var v=g.matchMode||Be(y,"filterMatchMode")||"startsWith";if(h={filterField:b,filterValue:g.value,filterConstraint:"custom"===v?Be(y,"filterFunction"):o.filters[v],isStrictMode:c,options:{rowData:s,filters:a,props:l,column:{filterMeta:g,filterField:b,props:W.getCProps(y)}}},(!c||ot(f,h)||at(f,h))&&(c||at(f,h)||ot(f,h))||(d=!1),!d)break}if(l.globalFilter&&!p){var S=ge({},f);h={filterField:b,filterValue:l.globalFilter,filterConstraint:o.filters[l.globalFilterMatchMode],isStrictMode:c},(c&&(ot(S,h)||at(S,h))||!c&&(at(S,h)||ot(S,h)))&&(p=!0,f=S)}}var C=d;l.globalFilter&&(C=d&&p),C&&r.push(f)}}catch(e){u.e(e)}finally{u.f()}return r},ot=function(e,t){if(e){var n=!1;if(e.children){var r=A(e.children);e.children=[];var l,o=de(r);try{for(o.s();!(l=o.n()).done;){var a=ge({},l.value);at(a,t)&&(n=!0,e.children.push(a))}}catch(e){o.e(e)}finally{o.f()}}if(n)return!0}},at=function(e,t){var n=t.filterField,r=t.filterValue,o=t.filterConstraint,i=t.isStrictMode,c=t.options,u=!1;return o(a.resolveFieldData(e.data,n),r,l.filterLocale,c)&&(u=!0),(!u||i&&!it(e))&&(u=ot(e,{filterField:n,filterValue:r,filterConstraint:o,isStrictMode:i})||u),u},it=function(e){return!1!==e.leaf&&!(e.children&&e.children.length)};e.useImperativeHandle(r,(function(){return{props:l,filter:Re,getElement:function(){return L.current}}}));var ct,ut=function(t,n){var r=$e(),o=qe(),a=A(Qe()),i=Ze();return e.createElement(se,{columns:t,columnGroup:n,tabIndex:l.tabIndex,onSort:Ee,sortField:r,sortIcon:l.sortIcon,sortOrder:o,multiSortMeta:a,resizableColumns:l.resizableColumns,onResizeStart:Fe,reorderableColumns:l.reorderableColumns,onDragStart:Ge,onDragOver:We,onDragLeave:_e,onDrop:Ve,onFilter:De,filters:i,filterDelay:l.filterDelay})},st=function(t,n){return e.createElement(ae,{columns:t,columnGroup:n})},ft=function(t,n){return e.createElement(re,{value:t,checkboxIcon:l.checkboxIcon,columns:n,expandedKeys:l.onToggle?l.expandedKeys:d,selectOnEdit:l.selectOnEdit,onToggle:Se,onExpand:l.onExpand,onCollapse:l.onCollapse,paginator:l.paginator,first:Je(),rows:Ye(),selectionMode:l.selectionMode,selectionKeys:l.selectionKeys,onSelectionChange:l.onSelectionChange,metaKeySelection:l.metaKeySelection,onRowClick:l.onRowClick,onSelect:l.onSelect,onUnselect:l.onUnselect,propagateSelectionUp:l.propagateSelectionUp,propagateSelectionDown:l.propagateSelectionDown,lazy:l.lazy,rowClassName:l.rowClassName,emptyMessage:l.emptyMessage,loading:l.loading,contextMenuSelectionKey:l.contextMenuSelectionKey,onContextMenuSelectionChange:l.onContextMenuSelectionChange,onContextMenu:l.onContextMenu})},dt=function(t,n){var r=c("p-paginator-"+t,l.paginatorClassName);return e.createElement(p,{first:Je(),rows:Ye(),pageLinkSize:l.pageLinkSize,className:r,onPageChange:Ce,template:l.paginatorTemplate,totalRecords:n,rowsPerPageOptions:l.rowsPerPageOptions,currentPageReportTemplate:l.currentPageReportTemplate,leftContent:l.paginatorLeft,rightContent:l.paginatorRight,alwaysShow:l.alwaysShowPaginator,dropdownAppendTo:l.paginatorDropdownAppendTo})},pt=function(t,n,r,o,a){var i=ut(n,o),c=st(n,a),u=ft(t,n);return e.createElement(fe,{columns:n,header:i,body:u,footer:c,scrollHeight:l.scrollHeight,frozen:r,frozenWidth:l.frozenWidth})},mt=function(t){var n,r,o=tt(),a=nt(o),i=a?rt(o):o;return a&&(n=pt(t,a,!0,l.frozenHeaderColumnGroup,l.frozenFooterColumnGroup)),r=pt(t,i,!1,l.headerColumnGroup,l.footerColumnGroup),e.createElement("div",{className:"p-treetable-wrapper p-treetable-scrollable-wrapper"},n,r)},yt=function(t){var n=tt(),r=ut(n,l.headerColumnGroup),o=st(n,l.footerColumnGroup),a=ft(t,n),i=c("p-treetable-table",{"p-treetable-scrollable-table":l.scrollable,"p-treetable-resizable-table":l.resizableColumns,"p-treetable-resizable-table-fit":l.resizableColumns&&"fit"===l.columnResizeMode},l.tableClassName);return e.createElement("div",{className:"p-treetable-wrapper"},e.createElement("table",{ref:V,style:l.tableStyle,className:i},r,o,a))},gt=function(){var e=l.value||[];if(!l.lazy&&e&&e.length){var t=Ze(),n=$e(),r=Qe();(a.isNotEmpty(t)||l.globalFilter)&&(e=lt(e)),(n||a.isNotEmpty(r))&&("single"===l.sortMode?e=Oe(e):"multiple"===l.sortMode&&(e=Me(e)))}return e}(),bt=a.findDiffKeys(l,be.defaultProps),ht=c("p-treetable p-component",{"p-treetable-hoverable-rows":l.rowHover,"p-treetable-selectable":l.selectionMode&&"single"===l.selectionMode||l.selectionMode&&"multiple"===l.selectionMode,"p-treetable-resizable":l.resizableColumns,"p-treetable-resizable-fit":l.resizableColumns&&"fit"===l.columnResizeMode,"p-treetable-striped":l.stripedRows,"p-treetable-gridlines":l.showGridlines},l.className),vt=(ct=gt,l.scrollable?mt(ct):yt(ct)),St=function(e){return l.lazy?l.totalRecords:e?e.length:0}(gt),Ct=l.header&&e.createElement("div",{className:"p-treetable-header"},l.header),Et=l.footer&&e.createElement("div",{className:"p-treetable-footer"},l.footer),wt=l.paginator&&"bottom"!==l.paginatorPosition&&dt("top",St),xt=l.paginator&&"top"!==l.paginatorPosition&&dt("bottom",St),kt=function(){if(l.loading){var t="p-treetable-loading-icon",n=u.getJSXIcon(l.loadingIcon||e.createElement(k,{className:t,spin:!0}),{className:t},{props:l});return e.createElement("div",{className:"p-treetable-loading"},e.createElement("div",{className:"p-treetable-loading-overlay p-component-overlay"},n))}return null}(),Ot=l.resizableColumns&&e.createElement("div",{ref:X,className:"p-column-resizer-helper",style:{display:"none"}}),Pt={position:"absolute",display:"none"},Mt={className:"p-datatable-reorder-indicator-up",style:ge({},Pt)},Nt=l.reorderableColumns&&u.getJSXIcon(l.reorderIndicatorUpIcon||e.createElement(O,null),void 0,{props:l}),It=l.reorderableColumns&&e.createElement("span",M({ref:B},Mt),Nt),Kt={className:"p-datatable-reorder-indicator-down",style:ge({},Pt)},Rt=u.getJSXIcon(l.reorderIndicatorDownIcon||e.createElement(P,null),void 0,{props:l}),Dt=l.reorderableColumns&&e.createElement("span",M({ref:J},Kt),Rt);return e.createElement("div",M({ref:L,id:l.id,className:ht,style:l.style,"data-scrollselectors":".p-treetable-wrapper"},bt),kt,Ct,wt,vt,xt,Et,Ot,It,Dt)}));be.displayName="TreeTable";export{be as TreeTable};
