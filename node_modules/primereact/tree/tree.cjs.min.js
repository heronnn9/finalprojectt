"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),n=require("primereact/utils"),t=require("primereact/api"),r=require("primereact/ripple"),o=require("primereact/icons/check"),l=require("primereact/icons/chevrondown"),a=require("primereact/icons/chevronright"),i=require("primereact/icons/minus"),c=require("primereact/icons/search"),d=require("primereact/icons/spinner");function s(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}})),n.default=e,Object.freeze(n)}var u=s(e);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},p.apply(this,arguments)}function f(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function g(e){if(Array.isArray(e))return f(e)}function y(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function m(e,n){if(e){if("string"==typeof e)return f(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?f(e,n):void 0}}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,n){if("object"!==v(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}function S(e){var n=b(e,"string");return"symbol"===v(n)?n:String(n)}function x(e,n,t){return(n=S(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function E(e){if(Array.isArray(e))return e}function C(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,l,a,i=[],c=!0,d=!1;try{if(l=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=l.call(t)).done)&&(i.push(r.value),i.length!==n);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(d)throw o}}return i}}function D(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(e,n){return E(e)||C(e,n)||m(e,n)||D()}var O={defaultProps:{__TYPE:"Tree",id:null,value:null,checkboxIcon:null,disabled:!1,selectionMode:null,selectionKeys:null,onSelectionChange:null,contextMenuSelectionKey:null,onContextMenuSelectionChange:null,expandedKeys:null,style:null,className:null,contentStyle:null,contentClassName:null,metaKeySelection:!0,propagateSelectionUp:!0,propagateSelectionDown:!0,loading:!1,loadingIcon:null,expandIcon:null,collapseIcon:null,dragdropScope:null,header:null,footer:null,showHeader:!0,filter:!1,filterIcon:null,filterValue:null,filterBy:"label",filterMode:"lenient",filterPlaceholder:null,filterLocale:void 0,filterTemplate:null,nodeTemplate:null,togglerTemplate:null,onSelect:null,onUnselect:null,onExpand:null,onCollapse:null,onToggle:null,onDragDrop:null,onContextMenu:null,onFilterValueChange:null,onNodeClick:null,onNodeDoubleClick:null,children:void 0},getProps:function(e){return n.ObjectUtils.getMergedProps(e,O.defaultProps)},getOtherProps:function(e){return n.ObjectUtils.getDiffProps(e,O.defaultProps)}};function N(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=w(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){i=!0,l=e},f:function(){try{a||null==t.return||t.return()}finally{if(i)throw l}}}}function w(e,n){if(e){if("string"==typeof e)return I(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?I(e,n):void 0}}function I(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function j(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function K(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?j(Object(t),!0).forEach((function(n){x(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var T=u.memo((function(e){var c,d,s,p=u.useRef(null),f=u.useRef(!1),g=e.isNodeLeaf(e.node),y=!!e.expandedKeys&&void 0!==e.expandedKeys[e.node.key]||e.node.expanded,m=function(n){var t=e.expandedKeys?K({},e.expandedKeys):{};t[e.node.key]=!0,e.onToggle({originalEvent:n,value:t}),b(n,!0)},h=function(n){var t=K({},e.expandedKeys);delete t[e.node.key],e.onToggle({originalEvent:n,value:t}),b(n,!1)},v=function(n){e.disabled||(y?h(n):m(n),n.preventDefault(),n.stopPropagation())},b=function(n,t){t?e.onExpand&&e.onExpand({originalEvent:n,node:e.node}):e.onCollapse&&e.onCollapse({originalEvent:n,node:e.node})},S=function(t){if(!e.disabled){var r=t.target.parentElement;if(n.DomHandler.hasClass(r,"p-treenode"))switch(t.which){case 40:var o=r.children[1];if(o)D(o.children[0]);else{for(var l=r.nextElementSibling;l&&n.DomHandler.hasClass(l,"p-treenode-droppoint");)l=l.nextElementSibling;if(l)D(l);else{var a=x(r);a&&D(a)}}t.preventDefault();break;case 38:if(r.previousElementSibling)D(E(r.previousElementSibling));else{var i=C(r);i&&D(i)}t.preventDefault();break;case 39:y||m(t),t.preventDefault();break;case 37:y&&h(t),t.preventDefault();break;case 13:k(t),t.preventDefault()}}},x=function e(n){var t=C(n);return t?t.nextElementSibling||e(t):null},E=function e(n){var t=n.children[1];return t?e(t.children[t.children.length-1]):n},C=function(e){var t=e.parentElement.parentElement;return n.DomHandler.hasClass(t,"p-treenode")?t:null},D=function(e){e&&e.children[0]&&e.children[0].focus()},k=function(t){e.onClick&&e.onClick({originalEvent:t,node:e.node});var r=t.target.nodeName;if(!e.disabled&&"INPUT"!==r&&"BUTTON"!==r&&"A"!==r&&!n.DomHandler.hasClass(t.target,"p-clickable")){if(e.selectionMode&&!1!==e.node.selectable){var o;if(A()){var l=U();o=e.selectionKeys?K({},e.selectionKeys):{},l?(e.propagateSelectionDown?j(e.node,!1,o):delete o[e.node.key],e.propagateSelectionUp&&e.onPropagateUp&&e.onPropagateUp({originalEvent:t,check:!1,selectionKeys:o}),e.onUnselect&&e.onUnselect({originalEvent:t,node:e.node})):(e.propagateSelectionDown?j(e.node,!0,o):o[e.node.key]={checked:!0},e.propagateSelectionUp&&e.onPropagateUp&&e.onPropagateUp({originalEvent:t,check:!0,selectionKeys:o}),e.onSelect&&e.onSelect({originalEvent:t,node:e.node}))}else{var a=P();if(!f.current&&e.metaKeySelection){var i=t.metaKey||t.ctrlKey;a&&i?(M()?o=null:delete(o=K({},e.selectionKeys))[e.node.key],e.onUnselect&&e.onUnselect({originalEvent:t,node:e.node})):(M()?o=e.node.key:L()&&((o=i&&e.selectionKeys?K({},e.selectionKeys):{})[e.node.key]=!0),e.onSelect&&e.onSelect({originalEvent:t,node:e.node}))}else M()?a?(o=null,e.onUnselect&&e.onUnselect({originalEvent:t,node:e.node})):(o=e.node.key,e.onSelect&&e.onSelect({originalEvent:t,node:e.node})):a?(delete(o=K({},e.selectionKeys))[e.node.key],e.onUnselect&&e.onUnselect({originalEvent:t,node:e.node})):((o=e.selectionKeys?K({},e.selectionKeys):{})[e.node.key]=!0,e.onSelect&&e.onSelect({originalEvent:t,node:e.node}))}e.onSelectionChange&&e.onSelectionChange({originalEvent:t,value:o})}f.current=!1}},O=function(n){e.onDoubleClick&&e.onDoubleClick({originalEvent:n,node:e.node})},w=function(t){e.disabled||(n.DomHandler.clearSelection(),e.onContextMenuSelectionChange&&e.onContextMenuSelectionChange({originalEvent:t,value:e.node.key}),e.onContextMenu&&e.onContextMenu({originalEvent:t,node:e.node}))},I=function(n){var t,r=n.check,o=n.selectionKeys,l=0,a=!1,i=N(e.node.children);try{for(i.s();!(t=i.n()).done;){var c=t.value;o[c.key]&&o[c.key].checked?l++:o[c.key]&&o[c.key].partialChecked&&(a=!0)}}catch(e){i.e(e)}finally{i.f()}r&&l===e.node.children.length?o[e.node.key]={checked:!0,partialChecked:!1}:(r||delete o[e.node.key],a||l>0&&l!==e.node.children.length?o[e.node.key]={checked:!1,partialChecked:!0}:delete o[e.node.key]),e.propagateSelectionUp&&e.onPropagateUp&&e.onPropagateUp(n)},j=function e(n,t,r){if(t?r[n.key]={checked:!0,partialChecked:!1}:delete r[n.key],n.children&&n.children.length)for(var o=0;o<n.children.length;o++)e(n.children[o],t,r)},P=function(){return!(!e.selectionMode||!e.selectionKeys)&&(M()?e.selectionKeys===e.node.key:void 0!==e.selectionKeys[e.node.key])},U=function(){return!!e.selectionKeys&&(e.selectionKeys[e.node.key]&&e.selectionKeys[e.node.key].checked)},M=function(){return e.selectionMode&&"single"===e.selectionMode},L=function(){return e.selectionMode&&"multiple"===e.selectionMode},A=function(){return e.selectionMode&&"checkbox"===e.selectionMode},H=function(){f.current=!0},J=function(t,r){(t.preventDefault(),!1!==e.node.droppable)&&(n.DomHandler.removeClass(t.target,"p-treenode-droppoint-active"),e.onDropPoint&&e.onDropPoint({originalEvent:t,path:e.path,index:-1===r?e.index:e.index+1,position:r}))},R=function(n){n.dataTransfer.types[1]===e.dragdropScope.toLocaleLowerCase()&&(n.dataTransfer.dropEffect="move",n.preventDefault())},q=function(t){t.dataTransfer.types[1]===e.dragdropScope.toLocaleLowerCase()&&n.DomHandler.addClass(t.target,"p-treenode-droppoint-active")},F=function(t){t.dataTransfer.types[1]===e.dragdropScope.toLocaleLowerCase()&&n.DomHandler.removeClass(t.target,"p-treenode-droppoint-active")},X=function(t){e.dragdropScope&&!1!==e.node.droppable&&(n.DomHandler.removeClass(p.current,"p-treenode-dragover"),t.preventDefault(),t.stopPropagation(),e.onDrop&&e.onDrop({originalEvent:t,path:e.path,index:e.index}))},_=function(n){n.dataTransfer.types[1]===e.dragdropScope.toLocaleLowerCase()&&!1!==e.node.droppable&&(n.dataTransfer.dropEffect="move",n.preventDefault(),n.stopPropagation())},V=function(t){t.dataTransfer.types[1]===e.dragdropScope.toLocaleLowerCase()&&!1!==e.node.droppable&&n.DomHandler.addClass(p.current,"p-treenode-dragover")},B=function(t){if(t.dataTransfer.types[1]===e.dragdropScope.toLocaleLowerCase()&&!1!==e.node.droppable){var r=t.currentTarget.getBoundingClientRect();(t.nativeEvent.x>r.left+r.width||t.nativeEvent.x<r.left||t.nativeEvent.y>=Math.floor(r.top+r.height)||t.nativeEvent.y<r.top)&&n.DomHandler.removeClass(p.current,"p-treenode-dragover")}},$=function(n){n.dataTransfer.setData("text",e.dragdropScope),n.dataTransfer.setData(e.dragdropScope,e.dragdropScope),e.onDragStart&&e.onDragStart({originalEvent:n,path:e.path,index:e.index})},z=function(n){e.onDragEnd&&e.onDragEnd({originalEvent:n})},Y=function(){var t=u.createElement("span",{className:"p-treenode-label"},e.node.label);e.nodeTemplate&&(t=n.ObjectUtils.getJSXElement(e.nodeTemplate,e.node,{onTogglerClick:v,className:"p-treenode-label",element:t,props:e,expanded:y}));return t},G=function(){if(A()&&!1!==e.node.selectable){var t=U(),r=!!e.selectionKeys&&e.selectionKeys[e.node.key]&&e.selectionKeys[e.node.key].partialChecked,l=n.classNames("p-checkbox-box",{"p-highlight":t,"p-indeterminate":r,"p-disabled":e.disabled}),a="p-checkbox-icon p-c",c=n.IconUtils.getJSXIcon(t?e.checkboxIcon||u.createElement(o.CheckIcon,{className:a}):r?e.checkboxIcon||u.createElement(i.MinusIcon,{className:a}):null,{className:a},e);return u.createElement("div",{className:"p-checkbox p-component"},u.createElement("div",{className:l,role:"checkbox","aria-checked":t},c))}return null},Q=function(){var t=e.node.icon||(y?e.node.expandedIcon:e.node.collapsedIcon);if(t){var r=n.classNames("p-treenode-icon",t);return u.createElement("span",{className:r})}return null},W=function(){var o=t.ariaLabel(y?"collapseLabel":"expandLabel"),i={className:"p-tree-toggler-icon","aria-hidden":!0},c=n.IconUtils.getJSXIcon(y?e.collapseIcon||u.createElement(l.ChevronDownIcon,i):e.expandIcon||u.createElement(a.ChevronRightIcon,i),K({},i),{props:e,expanded:y}),d=u.createElement("button",{type:"button",className:"p-tree-toggler p-link",tabIndex:-1,onClick:v,"aria-label":o},c,u.createElement(r.Ripple,null));e.togglerTemplate&&(d=n.ObjectUtils.getJSXElement(e.togglerTemplate,e.node,{onClick:v,containerClassName:"p-tree-toggler p-link",iconClassName:"p-tree-toggler-icon",element:d,props:e,expanded:y}));return d},Z=function(n){return e.dragdropScope?u.createElement("li",{className:"p-treenode-droppoint",onDrop:function(e){return J(e,n)},onDragOver:R,onDragEnter:q,onDragLeave:F}):null},ee=function(){var t=P(),r=U(),o=n.classNames("p-treenode-content",e.node.className,{"p-treenode-selectable":e.selectionMode&&!1!==e.node.selectable,"p-highlight":A()?r:t,"p-highlight-contextmenu":e.contextMenuSelectionKey&&e.contextMenuSelectionKey===e.node.key,"p-disabled":e.disabled}),l=W(),a=G(),i=Q(),c=Y();return u.createElement("div",{ref:p,className:o,style:e.node.style,onClick:k,onDoubleClick:O,onContextMenu:w,onTouchEnd:H,draggable:e.dragdropScope&&!1!==e.node.draggable&&!e.disabled,onDrop:X,onDragOver:_,onDragEnter:V,onDragLeave:B,onDragStart:$,onDragEnd:z,tabIndex:e.disabled?void 0:0,onKeyDown:S,role:"treeitem","aria-posinset":e.index+1,"aria-expanded":y,"aria-selected":r||t},l,a,i,c)},ne=(c=n.classNames("p-treenode",{"p-treenode-leaf":g},e.node.className),d=ee(),s=n.ObjectUtils.isNotEmpty(e.node.children)&&y?u.createElement("ul",{className:"p-treenode-children",role:"group"},e.node.children.map((function(n,t){return u.createElement(T,{key:n.key||n.label,node:n,parent:e.node,index:t,last:t===e.node.children.length-1,path:e.path+"-"+t,disabled:e.disabled,selectionMode:e.selectionMode,selectionKeys:e.selectionKeys,onSelectionChange:e.onSelectionChange,metaKeySelection:e.metaKeySelection,propagateSelectionDown:e.propagateSelectionDown,propagateSelectionUp:e.propagateSelectionUp,contextMenuSelectionKey:e.contextMenuSelectionKey,onContextMenuSelectionChange:e.onContextMenuSelectionChange,onContextMenu:e.onContextMenu,onExpand:e.onExpand,onCollapse:e.onCollapse,onSelect:e.onSelect,onUnselect:e.onUnselect,onClick:e.onClick,onDoubleClick:e.onDoubleClick,expandedKeys:e.expandedKeys,onToggle:e.onToggle,onPropagateUp:I,nodeTemplate:e.nodeTemplate,togglerTemplate:e.togglerTemplate,isNodeLeaf:e.isNodeLeaf,dragdropScope:e.dragdropScope,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDrop:e.onDrop,onDropPoint:e.onDropPoint})}))):null,u.createElement("li",{className:c,style:e.node.style},d,s));if(e.dragdropScope&&!e.disabled){var te=Z(-1),re=e.last?Z(1):null;return u.createElement(u.Fragment,null,te,ne,re)}return ne}));function P(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function U(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?P(Object(t),!0).forEach((function(n){x(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function M(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=L(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){i=!0,l=e},f:function(){try{a||null==t.return||t.return()}finally{if(i)throw l}}}}function L(e,n){if(e){if("string"==typeof e)return A(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?A(e,n):void 0}}function A(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}T.displayName="UITreeNode";var H=u.memo(u.forwardRef((function(e,t){var r=O.getProps(e),o=k(u.useState(""),2),l=o[0],a=o[1],i=k(u.useState(r.expandedKeys),2),s=i[0],f=i[1],v=u.useRef(null),b=u.useRef([]),S=u.useRef(null),x=u.useRef(!1),E=r.onFilterValueChange?r.filterValue:l,C=r.onToggle?r.expandedKeys:s,D={filter:function(e){return F(e)},reset:function(){return $()}},N=function(e){r.onToggle?r.onToggle(e):f(e.value)},w=function(e){S.current={path:e.path,index:e.index}},I=function(){S.current=null},j=function(e){if(L(S.current.path,e.path)){var n=JSON.parse(JSON.stringify(r.value)),t=S.current.path.split("-");t.pop();var o=J(n,t),l=o?o.children[S.current.index]:n[S.current.index],a=J(n,e.path.split("-"));a.children?a.children.push(l):a.children=[l],o?o.children.splice(S.current.index,1):n.splice(S.current.index,1),r.onDragDrop&&r.onDragDrop({originalEvent:e.originalEvent,value:n,dragNode:l,dropNode:a,dropIndex:e.index})}},K=function(e){if(A(e)){var n=JSON.parse(JSON.stringify(r.value)),t=S.current.path.split("-");t.pop();var o=e.path.split("-");o.pop();var l=J(n,t),a=J(n,o),i=l?l.children[S.current.index]:n[S.current.index],c=H(S.current.path,e.path);if(l?l.children.splice(S.current.index,1):n.splice(S.current.index,1),e.position<0){var d=c?S.current.index>e.index?e.index:e.index-1:e.index;a?a.children.splice(d,0,i):n.splice(d,0,i)}else a?a.children.push(i):n.push(i);r.onDragDrop&&r.onDragDrop({originalEvent:e.originalEvent,value:n,dragNode:i,dropNode:a,dropIndex:e.index})}},P=function(e,n){return!!e&&(e!==n&&0!==n.indexOf(e))},L=function(e,n){return!!P(e,n)&&!(e.indexOf("-")>0&&e.substring(0,e.lastIndexOf("-"))===n)},A=function(e){return!!P(S.current.path,e.path)&&(-1!==e.position||!H(S.current.path,e.path)||S.current.index+1!==e.index)},H=function(e,n){return 1===e.length&&1===n.length||e.substring(0,e.lastIndexOf("-"))===n.substring(0,n.lastIndexOf("-"))},J=function e(n,t){if(0===t.length)return null;var r=parseInt(t[0],10),o=n.children?n.children[r]:n[r];return 1===t.length?o:(t.shift(),e(o,t))},R=function(e){return!1!==e.leaf&&!(e.children&&e.children.length)},q=function(e){13===e.which&&e.preventDefault()},F=function(e){x.current=!0;var n=e.target.value;r.onFilterValueChange?r.onFilterValueChange({originalEvent:e,value:n}):a(n)},X=function(e){a(n.ObjectUtils.isNotEmpty(e)?e:""),_()},_=function(){if(x.current){if(n.ObjectUtils.isEmpty(E))b.current=r.value;else{b.current=[];var e,t=r.filterBy.split(","),o=E.toLocaleLowerCase(r.filterLocale),l="strict"===r.filterMode,a=M(r.value);try{for(a.s();!(e=a.n()).done;){var i=U({},e.value),c={searchFields:t,filterText:o,isStrictMode:l};(l&&(V(i,c)||B(i,c))||!l&&(B(i,c)||V(i,c)))&&b.current.push(i)}}catch(e){a.e(e)}finally{a.f()}}x.current=!1}},V=function(e,n){if(e){var t=!1;if(e.children){var r=g(i=e.children)||y(i)||m(i)||h();e.children=[];var o,l=M(r);try{for(l.s();!(o=l.n()).done;){var a=U({},o.value);B(a,n)&&(t=!0,e.children.push(a))}}catch(e){l.e(e)}finally{l.f()}}if(t)return e.expanded=!0,!0}var i},B=function(e,t){var o,l=t.searchFields,a=t.filterText,i=t.isStrictMode,c=!1,d=M(l);try{for(d.s();!(o=d.n()).done;){String(n.ObjectUtils.resolveFieldData(e,o.value)).toLocaleLowerCase(r.filterLocale).indexOf(a)>-1&&(c=!0)}}catch(e){d.e(e)}finally{d.f()}return(!c||i&&!R(e))&&(c=V(e,{searchFields:l,filterText:a,isStrictMode:i})||c),c},$=function(){a("")};u.useImperativeHandle(t,(function(){return{props:r,filter:X,getElement:function(){return v.current}}}));var z=function(e,n,t){return u.createElement(T,{key:e.key||e.label,node:e,index:n,last:t,path:String(n),checkboxIcon:r.checkboxIcon,expandIcon:r.expandIcon,collapseIcon:r.collapseIcon,disabled:r.disabled,selectionMode:r.selectionMode,selectionKeys:r.selectionKeys,onSelectionChange:r.onSelectionChange,metaKeySelection:r.metaKeySelection,contextMenuSelectionKey:r.contextMenuSelectionKey,onContextMenuSelectionChange:r.onContextMenuSelectionChange,onContextMenu:r.onContextMenu,propagateSelectionDown:r.propagateSelectionDown,propagateSelectionUp:r.propagateSelectionUp,onExpand:r.onExpand,onCollapse:r.onCollapse,onSelect:r.onSelect,onUnselect:r.onUnselect,expandedKeys:C,onToggle:N,nodeTemplate:r.nodeTemplate,togglerTemplate:r.togglerTemplate,isNodeLeaf:R,dragdropScope:r.dragdropScope,onDragStart:w,onDragEnd:I,onDrop:j,onDropPoint:K,onClick:r.onNodeClick,onDoubleClick:r.onNodeDoubleClick})},Y=function(){r.filter&&(x.current=!0,_());var e=r.filter&&b.current?b.current:r.value;return e.map((function(n,t){return z(n,t,t===e.length-1)}))},G=function(){if(r.filter){var e=n.ObjectUtils.isNotEmpty(E)?E:"",t="p-tree-filter-icon",o=n.IconUtils.getJSXIcon(r.filterIcon||u.createElement(c.SearchIcon,{className:t}),{className:t},{props:r}),l=u.createElement("div",{className:"p-tree-filter-container"},u.createElement("input",{type:"text",value:e,autoComplete:"off",className:"p-tree-filter p-inputtext p-component",placeholder:r.filterPlaceholder,onKeyDown:q,onChange:F,disabled:r.disabled}),o);if(r.filterTemplate)l=n.ObjectUtils.getJSXElement(r.filterTemplate,{className:"p-tree-filter-container",element:l,filterOptions:D,filterInputKeyDown:q,filterInputChange:F,filterIconClassName:"p-dropdown-filter-icon",props:r});return u.createElement(u.Fragment,null,l)}return null},Q=O.getOtherProps(r),W=n.ObjectUtils.reduceKeys(Q,n.DomHandler.ARIA_PROPS),Z=n.classNames("p-tree p-component",r.className,{"p-tree-selectable":r.selectionMode,"p-tree-loading":r.loading,"p-disabled":r.disabled}),ee=function(){if(r.loading){var e="p-tree-loading-icon",t=n.IconUtils.getJSXIcon(r.loadingIcon||u.createElement(d.SpinnerIcon,{className:e,spin:!0}),{className:e},{props:r});return u.createElement("div",{className:"p-tree-loading-overlay p-component-overlay"},t)}return null}(),ne=function(){if(r.value){var e=Y(),t=n.classNames("p-tree-container",r.contentClassName);return u.createElement("ul",p({className:t,role:"tree",style:r.contentStyle},W),e)}return null}(),te=function(){if(r.showHeader){var e=G(),t=e;if(r.header)t=n.ObjectUtils.getJSXElement(r.header,{filterContainerClassName:"p-tree-filter-container",filterIconClassName:"p-tree-filter-icon",filterInput:{className:"p-tree-filter p-inputtext p-component",onKeyDown:q,onChange:F},filterElement:e,element:t,props:r});return u.createElement("div",{className:"p-tree-header"},t)}return null}(),re=function(){var e=n.ObjectUtils.getJSXElement(r.footer,r);return u.createElement("div",{className:"p-tree-footer"},e)}();return u.createElement("div",p({id:r.id,ref:v,className:Z,style:r.style},Q),ee,te,ne,re)})));H.displayName="Tree",exports.Tree=H;
