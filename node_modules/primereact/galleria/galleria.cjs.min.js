"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("primereact/api"),n=require("primereact/csstransition"),r=require("primereact/hooks"),a=require("primereact/portal"),i=require("primereact/ripple"),l=require("primereact/utils"),o=require("primereact/icons/chevronleft"),c=require("primereact/icons/chevronright"),u=require("primereact/icons/chevronup"),s=require("primereact/icons/chevrondown"),m=require("primereact/icons/times");function p(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function d(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var v=d(e),f=p(t);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function b(e,t){if("object"!==I(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function g(e){var t=b(e,"string");return"symbol"===I(t)?t:String(t)}function y(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){if(Array.isArray(e))return e}function w(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,l,o=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return o}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){if(e){if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}function S(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function O(e,t){return x(e)||w(e,t)||E(e,t)||S()}var P={defaultProps:{__TYPE:"Galleria",id:null,value:null,activeIndex:0,fullScreen:!1,item:null,thumbnail:null,indicator:null,caption:null,className:null,closeIcon:null,style:null,header:null,footer:null,numVisible:3,responsiveOptions:null,showItemNavigators:!1,showThumbnailNavigators:!0,showItemNavigatorsOnHover:!1,changeItemOnIndicatorHover:!1,circular:!1,autoPlay:!1,transitionInterval:4e3,showThumbnails:!0,itemNextIcon:null,itemPrevIcon:null,nextThumbnailIcon:null,prevThumbnailIcon:null,thumbnailsPosition:"bottom",verticalThumbnailViewPortHeight:"300px",showIndicators:!1,showIndicatorsOnItem:!1,indicatorsPosition:"bottom",baseZIndex:0,transitionOptions:null,onItemChange:null,children:void 0},getProps:function(e){return l.ObjectUtils.getMergedProps(e,P.defaultProps)},getOtherProps:function(e){return l.ObjectUtils.getDiffProps(e,P.defaultProps)}},C=v.memo(v.forwardRef((function(e,t){var n=function(){e.slideShowActive&&e.stopSlideShow&&e.stopSlideShow()},a=function(t){n(),e.onActiveItemChange({index:e.circular&&0===e.activeItemIndex?e.value.length-1:0!==e.activeItemIndex?e.activeItemIndex-1:0}),t&&t.cancelable&&t.preventDefault()},u=function(t){n(),e.onActiveItemChange({index:e.circular&&e.value.length-1===e.activeItemIndex?0:e.activeItemIndex+1}),t&&t.cancelable&&t.preventDefault()},s=function(t){n(),e.onActiveItemChange({index:t})},m=function(t){e.changeItemOnIndicatorHover&&(n(),e.onActiveItemChange({index:t}))},p=function(t,r){13===t.which&&(n(),e.onActiveItemChange({index:r}))};r.useMountEffect((function(){e.autoPlay&&e.startSlideShow()}));var d=function(t){var n="p-galleria-indicator-"+t,r=l.classNames("p-galleria-indicator",{"p-highlight":e.activeItemIndex===t}),a=e.indicator&&e.indicator(t);return a||(a=v.createElement("button",{type:"button",tabIndex:-1,className:"p-link"},v.createElement(i.Ripple,null))),v.createElement("li",{className:r,key:n,tabIndex:0,onClick:function(){return s(t)},onMouseEnter:function(){return m(t)},onKeyDown:function(e){return p(e,t)}},a)},f=e.itemTemplate&&e.itemTemplate(e.value[e.activeItemIndex]),h=function(){if(e.showItemNavigators){var t=!e.circular&&0===e.activeItemIndex,n=l.classNames("p-galleria-item-prev p-galleria-item-nav p-link",{"p-disabled":t}),r="p-galleria-item-prev-icon",c=l.IconUtils.getJSXIcon(e.itemPrevIcon||v.createElement(o.ChevronLeftIcon,{className:r}),{className:r},{props:e});return v.createElement("button",{type:"button",className:n,onClick:a,disabled:t},c,v.createElement(i.Ripple,null))}return null}(),I=function(){if(e.showItemNavigators){var t=!e.circular&&e.activeItemIndex===e.value.length-1,n=l.classNames("p-galleria-item-next p-galleria-item-nav p-link",{"p-disabled":t}),r="p-galleria-item-next-icon",a=l.IconUtils.getJSXIcon(e.itemNextIcon||v.createElement(c.ChevronRightIcon,{className:r}),{className:r},{props:e});return v.createElement("button",{type:"button",className:n,onClick:u,disabled:t},a,v.createElement(i.Ripple,null))}return null}(),b=function(){if(e.caption){var t=e.caption(e.value[e.activeItemIndex]);return v.createElement("div",{className:"p-galleria-caption"},t)}return null}(),g=function(){if(e.showIndicators){for(var t=l.classNames("p-galleria-indicators p-reset",e.indicatorsContentClassName),n=[],r=0;r<e.value.length;r++)n.push(d(r));return v.createElement("ul",{className:t},n)}return null}();return v.createElement("div",{ref:t,className:"p-galleria-item-wrapper"},v.createElement("div",{className:"p-galleria-item-container"},h,v.createElement("div",{className:"p-galleria-item"},f),I,b),g)})));function T(e){if(Array.isArray(e))return N(e)}function j(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function k(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}C.displayName="GalleriaItem";var A=v.memo((function(e){var t=e.active?0:null,n=e.template&&e.template(e.item),r=l.classNames("p-galleria-thumbnail-item",{"p-galleria-thumbnail-item-current":e.current,"p-galleria-thumbnail-item-active":e.active,"p-galleria-thumbnail-item-start":e.start,"p-galleria-thumbnail-item-end":e.end},e.className);return v.createElement("div",{className:r},v.createElement("div",{className:"p-galleria-thumbnail-item-content",tabIndex:t,onClick:function(t){e.onItemClick({originalEvent:t,index:e.index})},onKeyDown:function(t){13===t.which&&e.onItemClick({originalEvent:t,index:e.index})}},n))})),D=v.memo(v.forwardRef((function(e,t){var n=O(v.useState(e.numVisible),2),a=n[0],m=n[1],p=O(v.useState(0),2),d=p[0],h=p[1],I=v.useRef(null),b=v.useRef(null),g=v.useRef(""),y=v.useRef(null),x=v.useRef(null),w=r.usePrevious(a),N=r.usePrevious(e.activeItemIndex),S=O(r.useResizeListener({listener:function(){J()},when:e.responsiveOptions}),1)[0],P=function(t){var n=d+t;t<0&&-1*n+a>e.value.length-1?n=a-e.value.length:t>0&&n>0&&(n=0),e.circular&&(t<0&&e.value.length-1===e.activeItemIndex?n=0:t>0&&0===e.activeItemIndex&&(n=a-e.value.length)),I.current&&(l.DomHandler.removeClass(I.current,"p-items-hidden"),I.current.style.transform=e.isVertical?"translate3d(0, ".concat(n*(100/a),"%, 0)"):"translate3d(".concat(n*(100/a),"%, 0, 0)"),I.current.style.transition="transform 500ms ease 0s"),h(n)},C=function(){e.slideShowActive&&e.stopSlideShow&&e.stopSlideShow()},D=function(){var e=Math.floor(a/2);return a%2?e:e-1},H=function(t){C();var n=0!==e.activeItemIndex?e.activeItemIndex-1:0;a-(n+d)-1>D()&&(-1*d!=0||e.circular)&&P(1),e.onActiveItemChange({index:e.circular&&0===e.activeItemIndex?e.value.length-1:n}),t.cancelable&&t.preventDefault()},R=function(t){C();var n=e.activeItemIndex+1;n+d>D()&&(-1*d<Z()-1||e.circular)&&P(-1),e.onActiveItemChange({index:e.circular&&e.value.length-1===e.activeItemIndex?0:n}),t.cancelable&&t.preventDefault()},V=function(t){C();var n=t.index;if(n!==e.activeItemIndex){var r=n+d,i=0;n<e.activeItemIndex?(i=a-r-1-D())>0&&-1*d!=0&&P(i):(i=D()-r)<0&&-1*d<Z()-1&&P(i),e.onActiveItemChange({index:n})}},U=function(e){I.current&&"transform"===e.propertyName&&(l.DomHandler.addClass(I.current,"p-items-hidden"),I.current.style.transition="")},q=function(e){var t=e.changedTouches[0];b.current={x:t.pageX,y:t.pageY}},M=function(e){e.cancelable&&e.preventDefault()},X=function(t){var n=t.changedTouches[0];G(t,e.isVertical?n.pageY-b.current.y:n.pageX-b.current.x)},G=function(e,t){t<0?R(e):H(e)},Z=function(){return e.value.length>a?e.value.length-a+1:0},_=function(){y.current||(y.current=l.DomHandler.createInlineStyle(f.default.nonce));var t,n="\n            .p-galleria-thumbnail-items[".concat(g.current,"] .p-galleria-thumbnail-item {\n                flex: 1 0 ").concat(100/a,"%\n            }\n        ");if(e.responsiveOptions){x.current=T(t=e.responsiveOptions)||j(t)||E(t)||k(),x.current.sort((function(e,t){return l.ObjectUtils.sort(e.breakpoint,t.breakpoint,-1,f.default.locale,f.default.nullSortOrder)}));for(var r=0;r<x.current.length;r++){var i=x.current[r];n+="\n                    @media screen and (max-width: ".concat(i.breakpoint,") {\n                        .p-galleria-thumbnail-items[").concat(g.current,"] .p-galleria-thumbnail-item {\n                            flex: 1 0 ").concat(100/i.numVisible,"%\n                        }\n                    }\n                ")}}y.current.innerHTML=n},J=function(){if(I.current&&x.current){for(var t=window.innerWidth,n={numVisible:e.numVisible},r=0;r<x.current.length;r++){var i=x.current[r];parseInt(i.breakpoint,10)>=t&&(n=i)}a!==n.numVisible&&m(n.numVisible)}};r.useMountEffect((function(){I.current&&(g.current=l.UniqueComponentId(),I.current.setAttribute(g.current,"")),_(),J(),S()})),r.useUpdateEffect((function(){var t=d;w===a&&N===e.activeItemIndex||((t=e.activeItemIndex<=D()?0:e.value.length-a+D()<e.activeItemIndex?a-e.value.length:e.value.length-a<e.activeItemIndex&&a%2==0?-1*e.activeItemIndex+D()+1:-1*e.activeItemIndex+D())!==d&&h(t),I.current.style.transform=e.isVertical?"translate3d(0, ".concat(t*(100/a),"%, 0)"):"translate3d(".concat(t*(100/a),"%, 0, 0)"),N!==e.activeItemIndex&&(l.DomHandler.removeClass(I.current,"p-items-hidden"),I.current.style.transition="transform 500ms ease 0s"))}));var L,z,Y,K,W=function(){if(e.showThumbnailNavigators){var t=!e.circular&&0===e.activeItemIndex||e.value.length<=a,n=l.classNames("p-galleria-thumbnail-prev p-link",{"p-disabled":t}),r="p-galleria-thumbnail-prev-icon",c=l.IconUtils.getJSXIcon(e.isVertical?e.prevThumbnailIcon||v.createElement(u.ChevronUpIcon,{className:r}):e.prevThumbnailIcon||v.createElement(o.ChevronLeftIcon,{className:r}),{className:r},{props:e});return v.createElement("button",{className:n,onClick:H,disabled:t},c,v.createElement(i.Ripple,null))}return null},$=function(){if(e.showThumbnailNavigators){var t=!e.circular&&e.activeItemIndex===e.value.length-1||e.value.length<=a,n=l.classNames("p-galleria-thumbnail-next p-link",{"p-disabled":t}),r="p-galleria-thumbnail-next-icon",o=l.IconUtils.getJSXIcon(e.isVertical?e.nextThumbnailIcon||v.createElement(s.ChevronDownIcon,{className:r}):e.nextThumbnailIcon||v.createElement(c.ChevronRightIcon,{className:r}),{className:r},{props:e});return v.createElement("button",{className:n,onClick:R,disabled:t},o,v.createElement(i.Ripple,null))}return null},B=(L=e.value.map((function(t,n){var r=-1*d,i=r+a-1;return v.createElement(A,{key:n,index:n,template:e.itemTemplate,item:t,active:r<=n&&i>=n,start:r===n,end:i===n,onItemClick:V,current:e.activeItemIndex===n})})),z=e.isVertical?e.contentHeight:"",Y=W(),K=$(),v.createElement("div",{className:"p-galleria-thumbnail-container"},Y,v.createElement("div",{className:"p-galleria-thumbnail-items-container",style:{height:z}},v.createElement("div",{ref:I,className:"p-galleria-thumbnail-items",onTransitionEnd:U,onTouchStart:q,onTouchMove:M,onTouchEnd:X},L)),K));return v.createElement("div",{className:"p-galleria-thumbnail-wrapper"},B)})));function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}A.displayName="GalleriaThumbnailItem",D.displayName="GalleriaThumbnails";var V=v.memo(v.forwardRef((function(e,o){var c=P.getProps(e),u=O(v.useState(!1),2),s=u[0],p=u[1],d=O(v.useState(c.numVisible),2),I=d[0],b=d[1],g=O(v.useState(!1),2),y=g[0],x=g[1],w=O(v.useState(c.activeIndex),2),N=w[0],E=w[1],S=v.useRef(null),T=v.useRef(null),j=v.useRef(null),k=c.onItemChange?c.activeIndex:N,A="left"===c.thumbnailsPosition||"right"===c.thumbnailsPosition;r.useInterval((function(){H({index:c.circular&&c.value.length-1===k?0:k+1})}),c.transitionInterval,y);var H=function(e){c.onItemChange?c.onItemChange(e):E(e.index)},V=function(){p(!0)},U=function(){p(!1)},q=function(){l.DomHandler.addClass(document.body,"p-overflow-hidden")},M=function(){l.ZIndexUtils.set("modal",j.current,f.default.autoZIndex,c.baseZIndex||f.default.zIndex.modal),l.DomHandler.addMultipleClasses(j.current,"p-component-overlay p-component-overlay-enter")},X=function(){c.onShow&&c.onShow()},G=function(){l.DomHandler.removeClass(document.body,"p-overflow-hidden"),l.DomHandler.addClass(j.current,"p-component-overlay-leave")},Z=function(){l.ZIndexUtils.clear(j.current),c.onHide&&c.onHide()},_=function(){return y},J=function(){x(!0)},L=function(){x(!1)},z=function(e,t){var n=["top","left","bottom","right"].find((function(e){return e===t}));return n?"".concat(e,"-").concat(n):""};v.useEffect((function(){c.value&&c.value.length<I&&b(c.value.length)}),[c.value,I]),v.useEffect((function(){b(c.numVisible)}),[c.numVisible]),r.useUnmountEffect((function(){y&&L(),l.ZIndexUtils.clear(j.current)})),v.useImperativeHandle(o,(function(){return{props:c,show:V,hide:U,isAutoPlayActive:_,startSlideShow:J,stopSlideShow:L,getElement:function(){return S.current},getPreviewContent:function(){return T.current}}}));return l.ObjectUtils.isNotEmpty(c.value)&&function(){var e,r,o,u,p,d,b,g,x,w=(e=P.getOtherProps(c),r=c.showThumbnails&&z("p-galleria-thumbnails",c.thumbnailsPosition),o=c.showIndicators&&z("p-galleria-indicators",c.indicatorsPosition),u=l.classNames("p-galleria p-component",c.className,{"p-galleria-fullscreen":c.fullScreen,"p-galleria-indicator-onitem":c.showIndicatorsOnItem,"p-galleria-item-nav-onhover":c.showItemNavigatorsOnHover&&!c.fullScreen,"p-input-filled":"filled"===f.default.inputStyle,"p-ripple-disabled":!1===f.default.ripple},r,o),p={className:"p-galleria-close-icon","aria-hidden":!0},d=l.IconUtils.getJSXIcon(c.closeIcon||v.createElement(m.TimesIcon,p),R({},p),{props:c}),b=c.fullScreen&&v.createElement("button",{type:"button",className:"p-galleria-close p-link","aria-label":t.localeOption("close"),onClick:U},d,v.createElement(i.Ripple,null)),g=c.header?v.createElement("div",{className:"p-galleria-header"},c.header):null,x=c.footer?v.createElement("div",{className:"p-galleria-footer"},c.footer):null,v.createElement("div",h({ref:S,id:c.id,className:u,style:c.style},e),b,g,v.createElement("div",{className:"p-galleria-content"},v.createElement(C,{ref:T,value:c.value,activeItemIndex:k,onActiveItemChange:H,itemTemplate:c.item,circular:c.circular,caption:c.caption,showIndicators:c.showIndicators,itemPrevIcon:c.itemPrevIcon,itemNextIcon:c.itemNextIcon,changeItemOnIndicatorHover:c.changeItemOnIndicatorHover,indicator:c.indicator,showItemNavigators:c.showItemNavigators,autoPlay:c.autoPlay,slideShowActive:y,startSlideShow:J,stopSlideShow:L}),c.showThumbnails&&v.createElement(D,{value:c.value,activeItemIndex:k,onActiveItemChange:H,itemTemplate:c.thumbnail,numVisible:I,nextThumbnailIcon:c.nextThumbnailIcon,prevThumbnailIcon:c.prevThumbnailIcon,responsiveOptions:c.responsiveOptions,circular:c.circular,isVertical:A,contentHeight:c.verticalThumbnailViewPortHeight,showThumbnailNavigators:c.showThumbnailNavigators,autoPlay:c.autoPlay,slideShowActive:y,stopSlideShow:L})),x));if(c.fullScreen){var N=l.classNames("p-galleria-mask",{"p-galleria-visible":s});return v.createElement(a.Portal,{element:v.createElement("div",{ref:j,className:N},v.createElement(n.CSSTransition,{nodeRef:S,classNames:"p-galleria",in:s,timeout:{enter:150,exit:150},options:c.transitionOptions,unmountOnExit:!0,onEnter:q,onEntering:M,onEntered:X,onExit:G,onExited:Z},w))})}return w}()})));V.displayName="Galleria",exports.Galleria=V;
