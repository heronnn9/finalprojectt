"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("primereact/api"),n=require("primereact/csstransition"),r=require("primereact/hooks"),l=require("primereact/inputtext"),o=require("primereact/overlayservice"),a=require("primereact/portal"),u=require("primereact/utils"),i=require("primereact/icons/eye"),s=require("primereact/icons/eyeslash");function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function p(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var f=p(e),d=c(t);function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}function g(e){if(Array.isArray(e))return e}function y(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,o,a,u=[],i=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);i=!0);}catch(e){s=!0,l=e}finally{try{if(!i&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw l}}return u}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(e,t){return g(e)||y(e,t)||h(e,t)||v()}var E={defaultProps:{__TYPE:"Password",id:null,inputId:null,inputRef:null,promptLabel:null,weakLabel:null,mediumLabel:null,strongLabel:null,mediumRegex:"^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{6,})",strongRegex:"^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})",feedback:!0,toggleMask:!1,appendTo:null,header:null,content:null,footer:null,showIcon:null,hideIcon:null,icon:null,tooltip:null,tooltipOptions:null,style:null,className:null,inputStyle:null,inputClassName:null,panelStyle:null,panelClassName:null,transitionOptions:null,onInput:null,onShow:null,onHide:null,children:void 0},getProps:function(e){return u.ObjectUtils.getMergedProps(e,E.defaultProps)},getOtherProps:function(e){return u.ObjectUtils.getDiffProps(e,E.defaultProps)}},O=f.memo(f.forwardRef((function(e,c){var p=E.getProps(e),g=p.promptLabel||t.localeOption("passwordPrompt"),y=p.weakLabel||t.localeOption("weak"),b=p.mediumLabel||t.localeOption("medium"),h=p.strongLabel||t.localeOption("strong"),v=w(f.useState(!1),2),O=v[0],I=v[1],S=w(f.useState(null),2),x=S[0],j=S[1],k=w(f.useState(g),2),R=k[0],N=k[1],U=w(f.useState(!1),2),P=U[0],C=U[1],q=w(f.useState(!1),2),H=q[0],A=q[1],L=f.useRef(null),T=f.useRef(null),D=f.useRef(p.inputRef),M=f.useRef(new RegExp(p.mediumRegex)),Z=f.useRef(new RegExp(p.strongRegex)),J=H?"text":"password",X=w(r.useOverlayListener({target:L,overlay:T,listener:function(e,t){t.valid&&G()},when:O}),2),_=X[0],z=X[1],F=D.current&&D.current.value,B=f.useMemo((function(){return u.ObjectUtils.isNotEmpty(p.value)||u.ObjectUtils.isNotEmpty(p.defaultValue)||u.ObjectUtils.isNotEmpty(F)}),[p.value,p.defaultValue,F]),K=function(){if(x){var e=null;switch(x.strength){case"weak":e=y;break;case"medium":e=b;break;case"strong":e=h}e&&R!==e&&N(e)}else R!==g&&N(g)},V=function(e){p.feedback&&o.OverlayService.emit("overlay-click",{originalEvent:e,target:L.current})},Y=function(){A((function(e){return!e}))},$=function(){K(),I(!0)},G=function(){I(!1)},Q=function(){u.ZIndexUtils.set("overlay",T.current,d.default.autoZIndex,d.default.zIndex.overlay),D.current&&u.DomHandler.alignOverlay(T.current,D.current.parentElement,p.appendTo||d.default.appendTo)},W=function(){_(),p.onShow&&p.onShow()},ee=function(){z()},te=function(){u.ZIndexUtils.clear(T.current),p.onHide&&p.onHide()},ne=function(e){return Z.current.test(e)?3:M.current.test(e)?2:e.length?1:0};f.useImperativeHandle(c,(function(){return{props:p,focus:function(){return u.DomHandler.focus(D.current)},getElement:function(){return L.current},getOverlay:function(){return T.current},getInput:function(){return D.current}}})),f.useEffect((function(){u.ObjectUtils.combinedRefs(D,p.inputRef)}),[D,p.inputRef]),f.useEffect((function(){M.current=new RegExp(p.mediumRegex)}),[p.mediumRegex]),f.useEffect((function(){Z.current=new RegExp(p.strongRegex)}),[p.strongRegex]),f.useEffect((function(){!B&&u.DomHandler.hasClass(L.current,"p-inputwrapper-filled")&&u.DomHandler.removeClass(L.current,"p-inputwrapper-filled")}),[B]),r.useUnmountEffect((function(){u.ZIndexUtils.clear(T.current)}));var re,le,oe,ae,ue,ie,se,ce=u.classNames("p-password p-component p-inputwrapper",{"p-inputwrapper-filled":B,"p-inputwrapper-focus":P,"p-input-icon-right":p.toggleMask},p.className),pe=u.classNames("p-password-input",p.inputClassName),fe=E.getOtherProps(p),de=function(){var e,t=u.IconUtils.getJSXIcon(e=H?p.hideIcon||f.createElement(s.EyeSlashIcon,null):p.showIcon||f.createElement(i.EyeIcon,null),void 0,{props:p}),n=u.IconUtils.getJSXIcon(e,void 0,{props:p});if(p.toggleMask){var r=f.createElement("i",{onClick:Y}," ",t||n," ");if(p.icon)r=u.ObjectUtils.getJSXElement(p.icon,{onClick:Y,className:ce,element:r,props:p});return r}return null}(),me=(re=u.classNames("p-password-panel p-component",p.panelClassName,{"p-input-filled":"filled"===d.default.inputStyle,"p-ripple-disabled":!1===d.default.ripple}),oe=(le=x||{strength:"",width:"0%"}).strength,ae=le.width,ue=u.ObjectUtils.getJSXElement(p.header,p),ie=u.ObjectUtils.getJSXElement(p.footer,p),se=p.content?u.ObjectUtils.getJSXElement(p.content,p):f.createElement(f.Fragment,null,f.createElement("div",{className:"p-password-meter"},f.createElement("div",{className:"p-password-strength ".concat(oe),style:{width:ae}})),f.createElement("div",{className:"p-password-info ".concat(oe)},R)),f.createElement(a.Portal,{element:f.createElement(n.CSSTransition,{nodeRef:T,classNames:"p-connected-overlay",in:O,timeout:{enter:120,exit:100},options:p.transitionOptions,unmountOnExit:!0,onEnter:Q,onEntered:W,onExit:ee,onExited:te},f.createElement("div",{ref:T,className:re,style:p.panelStyle,onClick:V},ue,se,ie)),appendTo:p.appendTo}));return f.createElement("div",{ref:L,id:p.id,className:ce,style:p.style},f.createElement(l.InputText,m({ref:D,id:p.inputId},fe,{type:J,className:pe,style:p.inputStyle,onFocus:function(e){C(!0),p.feedback&&$(),p.onFocus&&p.onFocus(e)},onBlur:function(e){C(!1),p.feedback&&G(),p.onBlur&&p.onBlur(e)},onKeyUp:function(e){var t=e.keyCode||e.which;if(p.feedback){var n=null,r=null;switch(ne(e.target.value)){case 1:n=y,r={strength:"weak",width:"33.33%"};break;case 2:n=b,r={strength:"medium",width:"66.66%"};break;case 3:n=h,r={strength:"strong",width:"100%"};break;default:n=g,r=null}j(r),N(n),t&&!O&&$()}p.onKeyUp&&p.onKeyUp(e)},onInput:function(e,t){p.onInput&&p.onInput(e,t),p.onChange||(u.ObjectUtils.isNotEmpty(e.target.value)?u.DomHandler.addClass(L.current,"p-inputwrapper-filled"):u.DomHandler.removeClass(L.current,"p-inputwrapper-filled"))},tooltip:p.tooltip,tooltipOptions:p.tooltipOptions,hideIcon:p.hideIcon,showIcon:p.showIcon})),de,me)})));O.displayName="Password",exports.Password=O;
